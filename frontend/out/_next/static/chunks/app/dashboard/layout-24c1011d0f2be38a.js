(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7663],{1806:function(e,t,r){Promise.resolve().then(r.bind(r,3511))},8755:function(e,t,r){"use strict";r.d(t,{Z:function(){return h}});var a=r(2265);let n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),i=e=>{let t=l(e);return t.charAt(0).toUpperCase()+t.slice(1)};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1},d=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:d="",children:h,iconNode:u,...x}=e;return(0,a.createElement)("svg",{ref:t,...c,width:s,height:s,stroke:r,strokeWidth:i?24*Number(l)/Number(s):l,className:n("lucide",d),...!h&&!o(x)&&{"aria-hidden":"true"},...x},[...u.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(h)?h:[h]])}),h=(e,t)=>{let r=(0,a.forwardRef)((r,l)=>{let{className:c,...o}=r;return(0,a.createElement)(d,{ref:l,iconNode:t,className:n("lucide-".concat(s(i(e))),"lucide-".concat(e),c),...o})});return r.displayName=i(e),r}},4766:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8755).Z)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]])},3618:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8755).Z)("calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]])},7662:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8755).Z)("car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]])},2451:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8755).Z)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},5187:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8755).Z)("circle-dollar-sign",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]])},5621:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8755).Z)("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]])},5466:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8755).Z)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]])},7692:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8755).Z)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]])},8293:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8755).Z)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]])},4286:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8755).Z)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},5080:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8755).Z)("ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]])},2369:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8755).Z)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},1804:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8755).Z)("wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]])},2489:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8755).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},7648:function(e,t,r){"use strict";r.d(t,{default:function(){return n.a}});var a=r(2972),n=r.n(a)},9376:function(e,t,r){"use strict";var a=r(5475);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},3511:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return A}});var a=r(7437),n=r(2265),s=r(7648),l=r(9376),i=r(4072),c=r(5466),o=r(5080),d=r(5621),h=r(3618),u=r(1804),x=r(5187);let f=(0,r(8755).Z)("disc-3",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M6 12c0-1.7.7-3.2 1.8-4.2",key:"oqkarx"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M18 12c0 1.7-.7 3.2-1.8 4.2",key:"1eah9h"}]]);var m=r(7662),p=r(2369),b=r(4286),y=r(2451),k=r(2489),w=r(7692),v=r(8293),g=r(4766),N=r(7766),j=r(5186),Z=r(1837),M=r(7921);function A(e){var t,r;let{children:A}=e,[C,S]=(0,n.useState)(!1),[D,z]=(0,n.useState)(!1),[F,O]=(0,n.useState)([]),[_,E]=(0,n.useState)(0),P=(0,l.usePathname)(),T=(0,l.useRouter)(),{user:L,isLoading:H,logout:R}=(0,N.a)();(0,n.useEffect)(()=>{H||L||T.replace("/login")},[H,L,T]),(0,n.useEffect)(()=>{L&&(async()=>{try{let e=await (0,Z.Nv)("/me/notifications",{method:"GET"});O(e.items),E(e.unreadCount)}catch(e){}})()},[L]);let q=(0,n.useMemo)(()=>F.slice(0,8),[F]);async function I(e){try{await (0,Z.Nv)("/me/notifications/".concat(e,"/read"),{method:"POST"}),O(t=>t.map(t=>{var r;return t.id===e?{...t,readAt:null!==(r=t.readAt)&&void 0!==r?r:new Date().toISOString()}:t})),E(e=>Math.max(0,e-1))}catch(e){}}async function V(){try{await (0,Z.Nv)("/me/notifications/read-all",{method:"POST"});let e=new Date().toISOString();O(t=>t.map(t=>{var r;return{...t,readAt:null!==(r=t.readAt)&&void 0!==r?r:e}})),E(0)}catch(e){}}let J=[{label:"داشبورد",href:"/dashboard",icon:c.Z},{label:"خرید بلیط",href:"/raffles",icon:o.Z},{label:"تاریخچه بلیط ها",href:"/dashboard/tickets",icon:d.Z},{label:"ماشین حساب سود",href:"/dashboard/calculator",icon:h.Z},{label:"کیف پول و شارژ",href:"/dashboard/wallet",icon:u.Z},{label:"کش بک و برداشت",href:"/wallet",icon:x.Z},{label:"گردونه شانس",href:"/wheel",icon:f},{label:"قرعه‌کشی ماشین اسلاید",href:"/slide-game",icon:m.Z},{label:"اسلاید آرنا",href:"/slide-arena",icon:m.Z},{label:"زیرمجموعه گیری",href:"/dashboard/referral",icon:p.Z},{label:"تاریخچه جوایز",href:"/dashboard/history",icon:o.Z},{label:"قوانین و مقررات",href:"/dashboard/rules",icon:b.Z}];return(0,a.jsxs)("div",{className:"min-h-screen bg-[#050505] text-white flex",children:[(0,a.jsx)("aside",{className:"\n        fixed lg:sticky top-0 h-screen z-50 bg-[#0A0A0A] border-l border-white/5 transition-all duration-300 ease-in-out\n        w-72 ".concat(C?"right-0":"-right-72 lg:right-0","\n      "),children:(0,a.jsxs)("div",{className:"h-full flex flex-col p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-12 px-2",children:[(0,a.jsxs)(s.default,{href:"/",className:"flex items-center gap-3 group",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-[#D4AF37] rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform shadow-[0_0_15px_rgba(212,175,55,0.3)]",children:(0,a.jsx)(y.Z,{className:"w-6 h-6 text-black"})}),(0,a.jsxs)("h1",{className:"text-xl font-black tracking-tighter",children:["LUX",(0,a.jsx)("span",{className:"text-[#D4AF37]",children:"."})]})]}),(0,a.jsx)("button",{onClick:()=>S(!1),className:"lg:hidden p-2 hover:bg-white/5 rounded-xl transition-colors text-white/40 hover:text-white",children:(0,a.jsx)(k.Z,{size:20})})]}),(0,a.jsx)("nav",{className:"flex-1 space-y-2",children:J.map(e=>{let t=e.icon,r=P===e.href;return(0,a.jsxs)(s.default,{href:e.href,onClick:()=>S(!1),className:"\n                    flex items-center gap-4 px-4 py-3.5 rounded-2xl transition-all group relative\n                    ".concat(r?"bg-[#D4AF37] text-black font-bold shadow-[0_10px_20px_-5px_rgba(212,175,55,0.3)]":"hover:bg-white/5 text-white/40 hover:text-white","\n                  "),children:[(0,a.jsx)(t,{className:"w-5 h-5 ".concat(r?"text-black":"group-hover:scale-110 transition-transform")}),(0,a.jsx)("span",{className:"text-sm",children:e.label}),r&&(0,a.jsx)(i.E.div,{layoutId:"activeTab",className:"absolute inset-0 bg-[#D4AF37] rounded-2xl -z-10"})]},e.href)})}),(0,a.jsx)("div",{className:"mt-auto pt-6 border-t border-white/5",children:(0,a.jsxs)("button",{className:"flex items-center gap-4 px-4 py-3.5 rounded-2xl text-rose-500 hover:bg-rose-500/10 transition-colors w-full",onClick:async()=>{await R(),j.ZP.success("از حساب خارج شدید"),T.push("/login")},children:[(0,a.jsx)(w.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"text-sm font-bold",children:"خروج از حساب"})]})})]})}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col min-w-0 h-screen overflow-y-auto",children:[(0,a.jsxs)("header",{className:"h-20 border-b border-white/5 bg-[#050505]/80 backdrop-blur-xl sticky top-0 z-40 px-4 md:px-8 flex items-center justify-between shrink-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("button",{onClick:()=>S(!C),className:"lg:hidden p-2 hover:bg-white/5 rounded-xl transition-colors text-[#D4AF37]",children:C?(0,a.jsx)(k.Z,{size:24}):(0,a.jsx)(v.Z,{size:24})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-[#D4AF37]/10 flex items-center justify-center border border-[#D4AF37]/20",children:(0,a.jsx)(p.Z,{size:14,className:"text-[#D4AF37]"})}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-white/20 text-[10px] leading-none mb-1",children:"پنل کاربری"}),(0,a.jsxs)("span",{className:"text-xs font-bold text-white",children:["خوش آمدید، ",null!==(t=null==L?void 0:L.email)&&void 0!==t?t:"کاربر"," "]})]})]})]}),(0,a.jsxs)("div",{className:"relative flex items-center gap-3 md:gap-6",children:[(0,a.jsxs)("div",{className:"hidden md:flex items-center gap-4 bg-white/5 px-4 py-2 rounded-xl border border-white/5",children:[(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-[10px] text-white/40 font-bold uppercase tracking-widest leading-none mb-1",children:"موجودی کیف پول"}),(0,a.jsxs)("p",{className:"text-sm font-black text-[#D4AF37]",children:[(0,M.d)(null!==(r=null==L?void 0:L.walletBalance)&&void 0!==r?r:0)," تومان"]})]}),(0,a.jsx)(s.default,{href:"/dashboard/wallet",className:"w-8 h-8 bg-[#D4AF37] rounded-lg flex items-center justify-center hover:scale-105 transition-transform",children:(0,a.jsx)(u.Z,{className:"w-4 h-4 text-black"})})]}),(0,a.jsxs)("button",{onClick:()=>z(e=>!e),className:"relative p-2 hover:bg-white/5 rounded-xl transition-colors group",children:[(0,a.jsx)(g.Z,{size:20,className:"text-white/40 group-hover:text-white transition-colors"}),_>0?(0,a.jsx)("span",{className:"absolute -top-1 -right-1 min-w-5 h-5 px-1 bg-[#D4AF37] text-black text-[10px] font-black rounded-full border border-[#050505] flex items-center justify-center",children:_>99?"99+":_}):null]}),D&&(0,a.jsxs)("div",{className:"absolute left-4 md:left-8 top-20 w-[360px] max-w-[92vw] bg-[#0A0A0A] border border-white/10 rounded-2xl p-4 shadow-2xl z-50",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("p",{className:"font-black text-sm",children:"اعلان‌ها"}),(0,a.jsx)("button",{onClick:V,className:"text-xs text-accent-gold hover:underline",children:"خواندن همه"})]}),(0,a.jsxs)("div",{className:"max-h-80 overflow-y-auto space-y-2",children:[q.map(e=>(0,a.jsxs)("button",{onClick:()=>{e.readAt||I(e.id)},className:"w-full text-right p-3 rounded-xl border transition ".concat(e.readAt?"bg-white/5 border-white/10":"bg-[#D4AF37]/10 border-[#D4AF37]/30"),children:[(0,a.jsx)("p",{className:"text-sm font-bold",children:e.title}),e.body?(0,a.jsx)("p",{className:"text-xs text-white/60 mt-1",children:e.body}):null,(0,a.jsx)("p",{className:"text-[10px] text-white/40 mt-1",children:new Date(e.createdAt).toLocaleString("fa-IR")})]},e.id)),q.length?null:(0,a.jsx)("p",{className:"text-xs text-white/50 p-2",children:"اعلانی ندارید."})]})]})]})]}),(0,a.jsx)("main",{className:"p-4 md:p-8",children:A})]}),C&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 lg:hidden",onClick:()=>S(!1)})]})}},7766:function(e,t,r){"use strict";r.d(t,{H:function(){return o},a:function(){return d}});var a=r(7437),n=r(2265),s=r(1837),l=r(5572);let i=(0,n.createContext)(null);async function c(){return(0,s.Nv)("/me",{method:"GET"},{auth:!0})}function o(e){let{children:t}=e,[r,o]=(0,n.useState)(null),[d,h]=(0,n.useState)(!0),u=(0,n.useCallback)(async()=>{try{let e=await c();o(e)}catch(e){o(null)}},[]);(0,n.useEffect)(()=>{let e=!0;return(async()=>{try{let t=await c();e&&o(t)}catch(t){e&&o(null)}finally{e&&h(!1)}})(),()=>{e=!1}},[]);let x=(0,n.useCallback)(async e=>{let{email:t,password:r}=e,a=await (0,s.Nv)("/auth/login",{method:"POST",body:JSON.stringify({email:t,password:r})},{auth:!1});return(0,s.vD)({accessToken:a.accessToken,refreshToken:a.refreshToken}),(0,l.DM)(a.user),o(a.user),a.user},[]),f=(0,n.useCallback)(async e=>{let{email:t,password:r,referralCode:a}=e;await (0,s.Nv)("/auth/register",{method:"POST",body:JSON.stringify({email:t,password:r,referralCode:a})},{auth:!1})},[]),m=(0,n.useCallback)(async()=>{try{await (0,s.Nv)("/auth/logout",{method:"POST",body:JSON.stringify({})})}catch(e){}finally{(0,s.Je)(),(0,l.DM)(null),o(null)}},[]),p=(0,n.useMemo)(()=>({user:r,isLoading:d,isAuthenticated:!!r,login:x,register:f,logout:m,refreshMe:u}),[r,d,x,f,m,u]);return(0,a.jsx)(i.Provider,{value:p,children:t})}function d(){let e=(0,n.useContext)(i);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},7921:function(e,t,r){"use strict";function a(e){return(Number.isFinite(e)?Math.trunc(e):0).toLocaleString("fa-IR")}function n(e){if(!e.trim())return null;let t=e.split("").map(e=>{let t="۰۱۲۳۴۵۶۷۸۹".indexOf(e);if(t>=0)return String(t);let r="٠١٢٣٤٥٦٧٨٩".indexOf(e);return r>=0?String(r):e}).join("").toLowerCase().replace(/,/g,"").trim(),r=t.includes("million")||t.includes("میلیون")||/\d+(\.\d+)?\s*m\b/.test(t),a=Number(t.replace(/[^\d.]/g,""));if(!Number.isFinite(a)||a<=0)return null;let n=Math.trunc(r?1e6*a:a);return n<=0?null:n}r.d(t,{C:function(){return n},d:function(){return a}})}},function(e){e.O(0,[5186,4072,2972,1837,2971,2117,1744],function(){return e(e.s=1806)}),_N_E=e.O()}]);