(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2064],{3025:function(e,t,r){Promise.resolve().then(r.bind(r,5087))},8755:function(e,t,r){"use strict";r.d(t,{Z:function(){return d}});var n=r(2265);let a=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),i=e=>{let t=s(e);return t.charAt(0).toUpperCase()+t.slice(1)};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1},u=(0,n.forwardRef)((e,t)=>{let{color:r="currentColor",size:l=24,strokeWidth:s=2,absoluteStrokeWidth:i,className:u="",children:d,iconNode:h,...f}=e;return(0,n.createElement)("svg",{ref:t,...o,width:l,height:l,stroke:r,strokeWidth:i?24*Number(s)/Number(l):s,className:a("lucide",u),...!d&&!c(f)&&{"aria-hidden":"true"},...f},[...h.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),d=(e,t)=>{let r=(0,n.forwardRef)((r,s)=>{let{className:o,...c}=r;return(0,n.createElement)(u,{ref:s,iconNode:t,className:a("lucide-".concat(l(i(e))),"lucide-".concat(e),o),...c})});return r.displayName=i(e),r}},1866:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(8755).Z)("arrow-down-left",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]])},7580:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(8755).Z)("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]])},1804:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(8755).Z)("wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]])},257:function(e,t,r){"use strict";var n,a;e.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(a=r.g.process)?void 0:a.env)?r.g.process:r(4227)},4227:function(e){!function(){var t={229:function(e){var t,r,n,a=e.exports={};function l(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===l||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:l}catch(e){t=l}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var o=[],c=!1,u=-1;function d(){c&&n&&(c=!1,n.length?o=n.concat(o):u=-1,o.length&&h())}function h(){if(!c){var e=i(d);c=!0;for(var t=o.length;t;){for(n=o,o=[];++u<t;)n&&n[u].run();u=-1,t=o.length}n=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}a.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];o.push(new f(e,t)),1!==o.length||c||i(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=m,a.addListener=m,a.once=m,a.off=m,a.removeListener=m,a.removeAllListeners=m,a.emit=m,a.prependListener=m,a.prependOnceListener=m,a.listeners=function(e){return[]},a.binding=function(e){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw Error("process.chdir is not supported")},a.umask=function(){return 0}}},r={};function n(e){var a=r[e];if(void 0!==a)return a.exports;var l=r[e]={exports:{}},s=!0;try{t[e](l,l.exports,n),s=!1}finally{s&&delete r[e]}return l.exports}n.ab="//";var a=n(229);e.exports=a}()},5087:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var n=r(7437),a=r(2265),l=r(1804),s=r(1866),i=r(7580),o=r(5186),c=r(1837),u=r(7921);function d(){var e,t,r;let[d,h]=(0,a.useState)(null),[f,m]=(0,a.useState)(!0),[p,x]=(0,a.useState)(""),[v,g]=(0,a.useState)("");async function b(){m(!0);try{let e=await (0,c.Nv)("/wallet",{method:"GET"});h(e)}catch(e){o.ZP.error(e instanceof Error?e.message:"خطا در دریافت اطلاعات کیف پول")}finally{m(!1)}}async function w(){let e=(0,u.C)(p);if(!e)return o.ZP.error("مبلغ شارژ معتبر نیست");try{await (0,c.Nv)("/wallet/deposit",{method:"POST",headers:{"Idempotency-Key":(0,c.c8)()},body:JSON.stringify({amount:e})}),x(""),o.ZP.success("شارژ کیف پول انجام شد"),await b()}catch(e){o.ZP.error(e instanceof Error?e.message:"خطا در شارژ کیف پول")}}async function y(){let e=(0,u.C)(v);if(!e)return o.ZP.error("مبلغ برداشت معتبر نیست");try{await (0,c.Nv)("/wallet/withdraw",{method:"POST",headers:{"Idempotency-Key":(0,c.c8)()},body:JSON.stringify({amount:e,iban:"IR000000000000000000000000"})}),g(""),o.ZP.success("درخواست برداشت ثبت شد"),await b()}catch(e){o.ZP.error(e instanceof Error?e.message:"خطا در برداشت وجه")}}(0,a.useEffect)(()=>{b()},[]);let j=(0,a.useMemo)(()=>{var e;return null!==(e=null==d?void 0:d.transactions.slice(0,8))&&void 0!==e?e:[]},[d]);return(0,n.jsxs)("div",{className:"space-y-8",children:[(0,n.jsxs)("div",{className:"grid lg:grid-cols-3 gap-8",children:[(0,n.jsxs)("div",{className:"lg:col-span-2 bg-gradient-to-br from-accent-gold to-yellow-600 rounded-[2.5rem] p-8 md:p-12 text-black relative overflow-hidden",children:[(0,n.jsx)("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),(0,n.jsxs)("div",{className:"relative z-10 flex flex-col gap-8",children:[(0,n.jsxs)("div",{className:"flex justify-between items-start",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-bold opacity-60 mb-1",children:"موجودی فعلی"}),(0,n.jsxs)("h2",{className:"text-4xl md:text-6xl font-black tracking-tight",children:[(0,u.d)(null!==(e=null==d?void 0:d.balance)&&void 0!==e?e:0)," ",(0,n.jsx)("span",{className:"text-lg opacity-60 font-bold",children:"تومان"})]})]}),(0,n.jsx)("div",{className:"bg-black/10 p-3 rounded-2xl backdrop-blur-sm",children:(0,n.jsx)(l.Z,{className:"w-8 h-8"})})]}),(0,n.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("input",{value:p,onChange:e=>x(e.target.value),placeholder:"مبلغ شارژ (تومان)",className:"w-full bg-white/35 border border-black/15 rounded-2xl px-4 py-3 placeholder:text-black/50"}),(0,n.jsxs)("button",{onClick:w,className:"mt-3 w-full bg-black text-white py-3 rounded-2xl font-bold flex items-center justify-center gap-2",children:[(0,n.jsx)(s.Z,{className:"w-5 h-5"}),"افزایش موجودی"]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("input",{value:v,onChange:e=>g(e.target.value),placeholder:"مبلغ برداشت (تومان)",className:"w-full bg-white/35 border border-black/15 rounded-2xl px-4 py-3 placeholder:text-black/50"}),(0,n.jsxs)("button",{onClick:y,className:"mt-3 w-full bg-black/80 text-white py-3 rounded-2xl font-bold flex items-center justify-center gap-2",children:[(0,n.jsx)(i.Z,{className:"w-5 h-5"}),"برداشت وجه"]})]})]})]})]}),(0,n.jsxs)("div",{className:"bg-[#0A0A0A] border border-white/5 p-6 rounded-[2.5rem] h-full flex flex-col justify-center gap-4",children:[(0,n.jsx)("h3",{className:"text-xl font-bold",children:"خلاصه حساب"}),(0,n.jsxs)("div",{className:"flex items-center justify-between border-b border-white/10 py-2",children:[(0,n.jsx)("span",{className:"text-white/60",children:"شانس‌ها"}),(0,n.jsx)("span",{className:"font-black",children:(null!==(t=null==d?void 0:d.chances)&&void 0!==t?t:0).toLocaleString("fa-IR")})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between border-b border-white/10 py-2",children:[(0,n.jsx)("span",{className:"text-white/60",children:"تراکنش‌ها"}),(0,n.jsx)("span",{className:"font-black",children:(null!==(r=null==d?void 0:d.transactions.length)&&void 0!==r?r:0).toLocaleString("fa-IR")})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,n.jsx)("span",{className:"text-white/60",children:"وضعیت"}),(0,n.jsx)("span",{className:"font-black text-emerald-400",children:f?"در حال بارگذاری":"فعال"})]})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-xl font-black mb-6",children:"تراکنش‌های اخیر"}),(0,n.jsxs)("div",{className:"space-y-4",children:[j.map(e=>(0,n.jsxs)("div",{className:"bg-[#0A0A0A] border border-white/5 p-5 rounded-3xl flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center ".concat(e.amount<0?"bg-rose-500/10 text-rose-500":"bg-emerald-500/10 text-emerald-500"),children:e.amount<0?(0,n.jsx)(i.Z,{className:"w-6 h-6"}):(0,n.jsx)(s.Z,{className:"w-6 h-6"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-bold",children:e.type}),(0,n.jsx)("p",{className:"text-xs text-white/30",children:new Date(e.createdAt).toLocaleString("fa-IR")})]})]}),(0,n.jsxs)("p",{className:"font-black text-lg ".concat(e.amount<0?"text-white":"text-emerald-500"),children:[e.amount<0?"-":"+"," ",(0,u.d)(Math.abs(e.amount))]})]},e.id)),j.length||f?null:(0,n.jsx)("div",{className:"bg-[#0A0A0A] border border-white/5 p-5 rounded-3xl text-white/60 text-sm",children:"تراکنشی ثبت نشده است."})]})]})]})}},1837:function(e,t,r){"use strict";r.d(t,{Je:function(){return d},Nv:function(){return m},c8:function(){return p},hP:function(){return c},vD:function(){return u}});var n,a=r(257);let l=null!==(n=a.env.NEXT_PUBLIC_API_URL)&&void 0!==n?n:"http://localhost:4000/api/v1",s=a.env.NEXT_PUBLIC_API_GATEWAY_KEY,i="car_access_token",o="car_refresh_token";function c(){return localStorage.getItem(i)}function u(e){localStorage.setItem(i,e.accessToken),localStorage.setItem(o,e.refreshToken)}function d(){localStorage.removeItem(i),localStorage.removeItem(o)}async function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=new Headers(t.headers);void 0!==t.body&&null!==t.body&&n.set("Content-Type","application/json"),s&&n.set("x-api-gateway-key",s),r&&n.set("Authorization","Bearer ".concat(r));let a=await fetch("".concat(l).concat(e),{...t,headers:n});if(!a.ok){var i,o;let e=await a.json().catch(()=>({}));throw Error(null!==(o=null!==(i=e.error)&&void 0!==i?i:e.message)&&void 0!==o?o:"HTTP_".concat(a.status))}return 204===a.status?{}:await a.json()}async function f(){let e=localStorage.getItem(o);if(!e)return null;try{let t=await h("/auth/refresh",{method:"POST",body:JSON.stringify({refreshToken:e})});return u(t),t.accessToken}catch(e){return d(),null}}async function m(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{auth:!0},a=null===(t=n.auth)||void 0===t||t,l=a?c():void 0;try{return await h(e,r,null!=l?l:void 0)}catch(n){if(!a)throw n;let t=await f();if(!t)throw n;return h(e,r,t)}}function p(){return"undefined"!=typeof crypto&&"randomUUID"in crypto?crypto.randomUUID():"idemp-".concat(Date.now(),"-").concat(Math.random().toString(16).slice(2))}},7921:function(e,t,r){"use strict";function n(e){return(Number.isFinite(e)?Math.trunc(e):0).toLocaleString("fa-IR")}function a(e){if(!e.trim())return null;let t=e.split("").map(e=>{let t="۰۱۲۳۴۵۶۷۸۹".indexOf(e);if(t>=0)return String(t);let r="٠١٢٣٤٥٦٧٨٩".indexOf(e);return r>=0?String(r):e}).join("").toLowerCase().replace(/,/g,"").trim(),r=t.includes("million")||t.includes("میلیون")||/\d+(\.\d+)?\s*m\b/.test(t),n=Number(t.replace(/[^\d.]/g,""));if(!Number.isFinite(n)||n<=0)return null;let a=Math.trunc(r?1e6*n:n);return a<=0?null:a}r.d(t,{C:function(){return a},d:function(){return n}})}},function(e){e.O(0,[5186,2971,2117,1744],function(){return e(e.s=3025)}),_N_E=e.O()}]);