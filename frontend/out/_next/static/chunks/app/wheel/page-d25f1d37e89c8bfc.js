(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1066],{5347:function(e,t,s){Promise.resolve().then(s.bind(s,8970))},8970:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return E}});var a=s(7437),r=s(29),l=s.n(r),n=s(2265),i=s(9653),o=s(4072),d=s(9799),c=s(2023),x=s(1804),b=s(1239),f=s(1706),u=s(8623),m=s(6595),h=s(2451),g=s(6337),p=s(9474),j=s(9322),w=s(5621),v=s(5186),N=s(9235),y=s(1837),k=s(7766);let C=e=>e.toLocaleString("fa-IR"),S=["#F43F5E","#8B5CF6","#0EA5E9","#10B981","#F59E0B","#EC4899","#6366F1","#14B8A6"],_=e=>{let{index:t,total:s,segment:r}=e,l=360/s,n=t*l,i=Math.PI/180*(n-90),o=Math.PI/180*(n+l-90),d="M ".concat(50," ").concat(50," L ").concat(50+50*Math.cos(i)," ").concat(50+50*Math.sin(i)," A ").concat(50," ").concat(50," 0 0 1 ").concat(50+50*Math.cos(o)," ").concat(50+50*Math.sin(o)," Z"),c=n-90+l/2,x=(c+360)%360,b=x>90&&x<270;return(0,a.jsxs)("g",{className:"hover:opacity-90 transition-opacity",children:[(0,a.jsx)("path",{d:d,fill:r.color,stroke:"rgba(255,255,255,0.15)",strokeWidth:"0.5"}),(0,a.jsxs)("g",{transform:"rotate(".concat(c,", ").concat(50,", ").concat(50,")"),children:[(0,a.jsx)("text",{x:82,y:50,fill:"white",textAnchor:"middle",dominantBaseline:"middle",transform:b?"rotate(180, ".concat(82,", ").concat(50,")"):void 0,style:{fontSize:"3.5px",fontWeight:800,fontFamily:"var(--font-sans)",filter:"drop-shadow(0px 1px 2px rgba(0,0,0,0.5))"},children:r.label.length>15?r.label.substring(0,14)+"..":r.label}),r.weight>0&&r.weight<5&&(0,a.jsx)("text",{x:82,y:55,fontSize:"3px",textAnchor:"middle",transform:b?"rotate(180, ".concat(82,", ").concat(55,")"):void 0,children:"⭐"})]})]})};function E(){var e,t;let{user:s,refreshMe:r,isAuthenticated:E}=(0,k.a)(),z=(0,i._)(),[A,Z]=(0,n.useState)(null),[F,P]=(0,n.useState)([]),[T,M]=(0,n.useState)(!1),[O,B]=(0,n.useState)(null),[D,I]=(0,n.useState)(0),[R,J]=(0,n.useState)(!0),[L,G]=(0,n.useState)("normal"),[H,W]=(0,n.useState)(null),q=(0,n.useRef)(null),K=(0,n.useRef)(null);(0,n.useEffect)(()=>{q.current=new Audio("/sounds/spin.mp3"),K.current=new Audio("/sounds/win.mp3"),q.current&&(q.current.volume=.5),K.current&&(K.current.volume=.6)},[]);let Q=(0,n.useCallback)(async()=>{try{var e,t,s;let[a,r]=await Promise.all([(0,y.Nv)("/wheel/config",{method:"GET"},{auth:!1}),E?(0,y.Nv)("/wheel/history",{method:"GET"}):Promise.resolve({items:[]})]);W(a.tiers);let l=null==a?void 0:null===(e=a.tiers)||void 0===e?void 0:e[L],n=((null==l?void 0:l.segments)||(null==a?void 0:null===(t=a.config)||void 0===t?void 0:t.segments)||[{label:"100 سکه",weight:10},{label:"پوچ",weight:10},{label:"5000 تومان",weight:5},{label:"آیفون 13",weight:1},{label:"گردونه رایگان",weight:10},{label:"20 امتیاز",weight:10}]).map((e,t)=>({...e,color:e.color||S[t%S.length]}));Z({wheelCostChances:(null==l?void 0:l.costAmount)||(null==a?void 0:null===(s=a.config)||void 0===s?void 0:s.wheelCostChances)||1,segments:n}),(null==r?void 0:r.items)&&P(r.items)}catch(e){console.error(e),v.ZP.error("خطا در دریافت اطلاعات گردونه")}},[E,L]);(0,n.useEffect)(()=>{Q()},[Q]);let U=null!==(e=null==s?void 0:s.chances)&&void 0!==e?e:0,V=null!==(t=null==s?void 0:s.walletBalance)&&void 0!==t?t:0,X=null==H?void 0:H[L],Y=(0,n.useMemo)(()=>!!A&&!!E&&!T&&null!=X&&!!X.enabled&&("IRR"===X.costAsset?V>=X.costAmount:U>=X.costAmount),[A,E,T,X,V,U]),$=async()=>{if(Y&&A){M(!0),B(null),R&&q.current&&(q.current.currentTime=0,q.current.loop=!0,q.current.play().catch(()=>{}));try{let{result:e}=await (0,y.Nv)("/wheel/spin",{method:"POST",body:JSON.stringify({tier:L})}),t=A.segments.length,s=360/t,a=A.segments.findIndex(t=>t.label===e.label),l=.8*s,n=D+1800+(360-((-1!==a?a:0)*s+s/2))+(Math.random()*l-l/2);await z.start({rotate:n,transition:{duration:5,ease:[.15,0,.15,1]}}),I(n),B(e),R&&(q.current&&(q.current.pause(),q.current.currentTime=0),K.current&&e.win&&K.current.play().catch(()=>{})),e.win?((0,N.Z)({particleCount:150,spread:80,origin:{y:.6},colors:["#F59E0B","#EC4899","#10B981"],zIndex:9999}),v.ZP.success("تبریک! برنده ".concat(e.label," شدید"),{icon:"\uD83C\uDF89",style:{background:"#10B981",color:"#fff"}})):v.ZP.error("متاسفانه پوچ بود!",{icon:"\uD83D\uDE22"}),await r(),await Q()}catch(e){v.ZP.error(e instanceof Error?e.message:"خطا در برقراری ارتباط با سرور"),R&&q.current&&q.current.pause()}finally{M(!1)}}};return(0,a.jsxs)("main",{dir:"rtl",className:"jsx-1b2b3416d8f3e1f2 min-h-screen bg-[#050505] text-white pt-24 pb-20 overflow-x-hidden relative",children:[(0,a.jsxs)("div",{className:"jsx-1b2b3416d8f3e1f2 fixed inset-0 pointer-events-none",children:[(0,a.jsx)("div",{className:"jsx-1b2b3416d8f3e1f2 absolute top-[-20%] left-[-10%] w-[800px] h-[800px] bg-purple-900/20 blur-[150px] rounded-full mix-blend-screen"}),(0,a.jsx)("div",{className:"jsx-1b2b3416d8f3e1f2 absolute bottom-[-20%] right-[-10%] w-[800px] h-[800px] bg-blue-900/20 blur-[150px] rounded-full mix-blend-screen"}),(0,a.jsx)("div",{className:"jsx-1b2b3416d8f3e1f2 absolute inset-0 bg-[url('/grid.svg')] opacity-[0.03]"})]}),(0,a.jsxs)("div",{className:"jsx-1b2b3416d8f3e1f2 max-w-6xl mx-auto px-4 relative z-10 space-y-12",children:[(0,a.jsxs)("header",{className:"jsx-1b2b3416d8f3e1f2 bg-white/5 backdrop-blur-xl border border-white/10 p-4 md:p-6 rounded-3xl relative overflow-hidden shadow-2xl",children:[(0,a.jsx)("div",{className:"jsx-1b2b3416d8f3e1f2 absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-purple-500 to-transparent opacity-50"}),(0,a.jsxs)("div",{className:"jsx-1b2b3416d8f3e1f2 flex flex-col md:flex-row md:items-center justify-between gap-6 relative z-10",children:[(0,a.jsxs)("div",{className:"jsx-1b2b3416d8f3e1f2 flex items-center gap-5",children:[(0,a.jsx)("div",{className:"jsx-1b2b3416d8f3e1f2 w-14 h-14 bg-gradient-to-br from-violet-600 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg shadow-violet-500/20 rotate-3 shrink-0 ring-1 ring-white/20",children:(0,a.jsx)(c.Z,{className:"text-white w-7 h-7"})}),(0,a.jsxs)("div",{className:"jsx-1b2b3416d8f3e1f2",children:[(0,a.jsx)("h1",{className:"jsx-1b2b3416d8f3e1f2 text-2xl md:text-3xl font-black tracking-tight text-white bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-400",children:"گردونه شانس"}),(0,a.jsx)("p",{className:"jsx-1b2b3416d8f3e1f2 text-white/40 text-sm font-medium mt-1",children:"شانس خودت رو برای جوایز میلیونی امتحان کن"})]})]}),(0,a.jsxs)("div",{className:"jsx-1b2b3416d8f3e1f2 flex flex-wrap items-center gap-3",children:[(0,a.jsxs)("div",{className:"jsx-1b2b3416d8f3e1f2 h-12 px-5 rounded-2xl bg-[#0F0F11] border border-white/5 flex items-center gap-3 shadow-inner",children:[(0,a.jsx)(x.Z,{className:"text-emerald-400 w-5 h-5"}),(0,a.jsxs)("div",{className:"jsx-1b2b3416d8f3e1f2 flex flex-col",children:[(0,a.jsx)("span",{className:"jsx-1b2b3416d8f3e1f2 text-[10px] text-gray-500 font-bold uppercase tracking-wider",children:"موجودی"}),(0,a.jsx)("span",{className:"jsx-1b2b3416d8f3e1f2 font-mono font-bold text-white",children:C(V)})]})]}),(0,a.jsxs)("div",{className:"jsx-1b2b3416d8f3e1f2 h-12 px-5 rounded-2xl bg-amber-500/10 border border-amber-500/20 flex items-center gap-3",children:[(0,a.jsx)(b.Z,{className:"text-amber-500 w-5 h-5 animate-pulse"}),(0,a.jsxs)("div",{className:"jsx-1b2b3416d8f3e1f2 flex flex-col",children:[(0,a.jsx)("span",{className:"jsx-1b2b3416d8f3e1f2 text-[10px] text-amber-500/60 font-bold uppercase tracking-wider",children:"شانس"}),(0,a.jsx)("span",{className:"jsx-1b2b3416d8f3e1f2 font-mono font-bold text-amber-500 text-lg",children:U.toLocaleString("fa-IR")})]})]}),(0,a.jsx)("button",{onClick:()=>J(!R),className:"jsx-1b2b3416d8f3e1f2 w-12 h-12 rounded-2xl bg-[#0F0F11] border border-white/5 flex items-center justify-center hover:bg-white/5 transition-colors shrink-0 text-white/50 hover:text-white",children:R?(0,a.jsx)(f.Z,{className:"w-5 h-5"}):(0,a.jsx)(u.Z,{className:"w-5 h-5"})})]})]}),(0,a.jsx)("div",{className:"jsx-1b2b3416d8f3e1f2 mt-4 grid grid-cols-3 gap-2 md:gap-3",children:["normal","gold","jackpot"].map(e=>{var t,s,r;let l=L===e,n=null==H?void 0:H[e];return(0,a.jsxs)("button",{onClick:()=>G(e),className:"jsx-1b2b3416d8f3e1f2 "+"rounded-2xl border px-3 py-2 text-right transition ".concat(l?"border-violet-400 bg-violet-500/10":"border-white/10 bg-[#0F0F11]"),children:[(0,a.jsx)("p",{className:"jsx-1b2b3416d8f3e1f2 text-sm font-black",children:"normal"===e?"گردونه معمولی":"gold"===e?"گردونه طلایی":"گردونه جکپات"}),(0,a.jsxs)("p",{className:"jsx-1b2b3416d8f3e1f2 text-[11px] text-white/50 mt-1",children:["هزینه: ",(null!==(s=null!==(t=null==n?void 0:n.costAmount)&&void 0!==t?t:null==A?void 0:A.wheelCostChances)&&void 0!==s?s:0).toLocaleString("fa-IR")," ",null!==(r=null==n?void 0:n.costAsset)&&void 0!==r?r:"CHANCE"]}),n&&!n.enabled?(0,a.jsx)("p",{className:"jsx-1b2b3416d8f3e1f2 text-[10px] text-rose-400 mt-1",children:"غیرفعال"}):null]},e)})})]}),(0,a.jsxs)("div",{className:"jsx-1b2b3416d8f3e1f2 grid lg:grid-cols-[1fr,380px] gap-12 items-start",children:[(0,a.jsxs)("div",{className:"jsx-1b2b3416d8f3e1f2 flex flex-col items-center justify-center",children:[(0,a.jsxs)("div",{className:"jsx-1b2b3416d8f3e1f2 relative w-full max-w-[420px] aspect-square mx-auto mb-12 group",children:[(0,a.jsx)("div",{className:"jsx-1b2b3416d8f3e1f2 absolute inset-0 bg-gradient-to-tr from-violet-600/20 to-fuchsia-600/20 rounded-full blur-[60px] animate-pulse"}),(0,a.jsxs)("div",{className:"jsx-1b2b3416d8f3e1f2 w-full h-full relative z-10 p-2",children:[(0,a.jsx)("div",{className:"jsx-1b2b3416d8f3e1f2 absolute inset-0 rounded-full bg-[#18181b] shadow-2xl border-[12px] border-[#27272a] ring-1 ring-white/5"}),(0,a.jsx)("div",{className:"jsx-1b2b3416d8f3e1f2 absolute inset-3 rounded-full border border-dashed border-white/10"}),[...Array(12)].map((e,t)=>(0,a.jsx)("div",{style:{transformOrigin:"center ".concat(210,"px"),transform:"rotate(".concat(30*t,"deg)")},className:"jsx-1b2b3416d8f3e1f2 absolute w-1.5 h-1.5 bg-white/30 rounded-full top-0 left-1/2 -ml-[3px]"},t)),(0,a.jsx)("div",{className:"jsx-1b2b3416d8f3e1f2 absolute -top-6 left-1/2 -translate-x-1/2 z-30 filter drop-shadow-[0_0_10px_rgba(234,179,8,0.5)]",children:(0,a.jsxs)("div",{className:"jsx-1b2b3416d8f3e1f2 w-10 h-12 bg-[#09090b] clip-path-marker flex flex-col items-center pt-1 border-t-4 border-amber-500",children:[(0,a.jsx)("div",{className:"jsx-1b2b3416d8f3e1f2 w-2 h-2 bg-amber-500 rounded-full shadow-[0_0_10px_#f59e0b]"}),(0,a.jsx)("div",{className:"jsx-1b2b3416d8f3e1f2 w-0.5 h-full bg-gradient-to-b from-amber-500/50 to-transparent mt-1"})]})}),(0,a.jsx)(o.E.div,{className:"w-full h-full relative rounded-full overflow-hidden border-[6px] border-[#09090b] shadow-[inset_0_0_20px_rgba(0,0,0,0.8)]",animate:z,initial:{rotate:0},style:{transformOrigin:"center"},children:A?(0,a.jsxs)("svg",{viewBox:"0 0 100 100",style:{filter:"drop-shadow(0 0 5px rgba(0,0,0,0.3))"},className:"jsx-1b2b3416d8f3e1f2 w-full h-full",children:[(0,a.jsx)("circle",{cx:"50",cy:"50",r:"50",fill:"#18181b",className:"jsx-1b2b3416d8f3e1f2"}),A.segments.map((e,t)=>(0,a.jsx)(_,{index:t,total:A.segments.length,segment:e},t))]}):(0,a.jsx)("div",{className:"jsx-1b2b3416d8f3e1f2 w-full h-full bg-[#18181b] animate-pulse rounded-full flex items-center justify-center",children:(0,a.jsx)("div",{className:"jsx-1b2b3416d8f3e1f2 w-16 h-16 border-2 border-white/10 border-t-violet-500 rounded-full animate-spin"})})}),(0,a.jsx)("div",{className:"jsx-1b2b3416d8f3e1f2 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-20 h-20 bg-[#18181b] rounded-full shadow-[0_10px_20px_rgba(0,0,0,0.5)] border-4 border-[#27272a] flex items-center justify-center z-20",children:(0,a.jsxs)("div",{className:"jsx-1b2b3416d8f3e1f2 w-14 h-14 bg-gradient-to-br from-[#27272a] to-[#09090b] rounded-full flex items-center justify-center shadow-inner relative overflow-hidden",children:[(0,a.jsx)("div",{className:"jsx-1b2b3416d8f3e1f2 absolute inset-0 bg-[url('/noise.png')] opacity-20"}),(0,a.jsx)(m.Z,{className:"w-6 h-6 text-amber-500 fill-amber-500 animate-pulse"})]})})]})]}),(0,a.jsx)("div",{className:"jsx-1b2b3416d8f3e1f2 relative z-20 w-full max-w-[280px]",children:E?(0,a.jsxs)("button",{onClick:$,disabled:!Y,className:"jsx-1b2b3416d8f3e1f2 \n                    w-full relative group py-5 rounded-2xl font-black text-xl overflow-hidden shadow-[0_10px_40px_-10px_rgba(139,92,246,0.3)]\n                    transition-all duration-300 hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none\n                  ",children:[(0,a.jsx)("div",{className:"jsx-1b2b3416d8f3e1f2 absolute inset-0 bg-gradient-to-r from-violet-600 via-fuchsia-600 to-violet-600 animate-gradient-xy"}),(0,a.jsx)("div",{className:"jsx-1b2b3416d8f3e1f2 absolute inset-[2px] bg-[#09090b] rounded-[14px] flex items-center justify-center z-10"}),(0,a.jsxs)("div",{className:"jsx-1b2b3416d8f3e1f2 relative z-20 flex flex-col items-center justify-center gap-1",children:[(0,a.jsxs)("span",{className:"jsx-1b2b3416d8f3e1f2 flex items-center gap-2 text-white group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r group-hover:from-violet-400 group-hover:to-fuchsia-400 transition-all",children:[T?"در حال چرخش...":"شروع چرخش",!T&&(0,a.jsx)(h.Z,{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform text-white"})]}),!T&&A&&(0,a.jsxs)("div",{className:"jsx-1b2b3416d8f3e1f2 text-[11px] font-mono text-gray-400 mt-0.5",children:["هزینه: ",(0,a.jsxs)("span",{className:"jsx-1b2b3416d8f3e1f2 text-violet-400",children:[A.wheelCostChances," شانس"]})]})]})]}):(0,a.jsxs)("div",{className:"jsx-1b2b3416d8f3e1f2 bg-[#18181b] border border-white/5 p-5 rounded-2xl text-center shadow-lg",children:[(0,a.jsx)(g.Z,{className:"w-6 h-6 text-gray-500 mx-auto mb-2"}),(0,a.jsx)("p",{className:"jsx-1b2b3416d8f3e1f2 text-gray-400 text-sm",children:"لطفاً برای شرکت در بازی وارد شوید"})]})})]}),(0,a.jsxs)("div",{className:"jsx-1b2b3416d8f3e1f2 space-y-6",children:[(0,a.jsx)(d.M,{mode:"wait",children:O&&(0,a.jsx)(o.E.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.95},className:"p-6 rounded-3xl relative overflow-hidden text-center border shadow-lg ".concat(O.win?"bg-[#0f1d16] border-emerald-500/20":"bg-[#1f1212] border-red-500/20"),children:(0,a.jsxs)("div",{className:"jsx-1b2b3416d8f3e1f2 relative z-10",children:[O.win?(0,a.jsx)("div",{className:"jsx-1b2b3416d8f3e1f2 w-12 h-12 bg-emerald-500/10 rounded-full flex items-center justify-center mx-auto mb-3 ring-1 ring-emerald-500/20",children:(0,a.jsx)(p.Z,{className:"w-6 h-6 text-emerald-400"})}):(0,a.jsx)("div",{className:"jsx-1b2b3416d8f3e1f2 w-12 h-12 bg-red-500/10 rounded-full flex items-center justify-center mx-auto mb-3 ring-1 ring-red-500/20",children:(0,a.jsx)(j.Z,{className:"w-6 h-6 text-red-400"})}),(0,a.jsx)("h3",{className:"jsx-1b2b3416d8f3e1f2 "+"font-bold text-xs uppercase tracking-widest mb-1 ".concat(O.win?"text-emerald-400":"text-red-400"),children:O.win?"تبریک!":"متاسفانه"}),(0,a.jsx)("div",{className:"jsx-1b2b3416d8f3e1f2 text-2xl md:text-3xl font-black text-white",children:O.label})]})})}),(0,a.jsxs)("div",{className:"jsx-1b2b3416d8f3e1f2 bg-[#0F0F11] border border-white/5 rounded-3xl overflow-hidden flex flex-col h-[500px] shadow-xl",children:[(0,a.jsxs)("div",{className:"jsx-1b2b3416d8f3e1f2 p-5 border-b border-white/5 bg-white/[0.02] flex items-center justify-between shrink-0",children:[(0,a.jsxs)("h3",{className:"jsx-1b2b3416d8f3e1f2 font-bold flex items-center gap-2 text-gray-200",children:[(0,a.jsx)(w.Z,{className:"text-violet-500 w-5 h-5"}),"تاریخچه چرخش‌ها"]}),(0,a.jsx)("span",{className:"jsx-1b2b3416d8f3e1f2 text-xs bg-white/5 px-2.5 py-1 rounded-lg text-gray-400 font-mono",children:F.length})]}),(0,a.jsx)("div",{className:"jsx-1b2b3416d8f3e1f2 flex-1 overflow-y-auto p-4 space-y-2 custom-scrollbar",children:0===F.length?(0,a.jsxs)("div",{className:"jsx-1b2b3416d8f3e1f2 h-full flex flex-col items-center justify-center text-gray-600 gap-3",children:[(0,a.jsx)(w.Z,{className:"w-10 h-10 opacity-20"}),(0,a.jsx)("span",{className:"jsx-1b2b3416d8f3e1f2 text-sm",children:"هنوز چرخشی انجام نداده‌اید"})]}):F.map((e,t)=>(0,a.jsxs)(o.E.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.05*t},className:"p-3.5 rounded-2xl bg-[#18181b] hover:bg-[#202024] border border-white/5 transition-all group flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"jsx-1b2b3416d8f3e1f2 flex flex-col gap-1",children:[(0,a.jsx)("span",{className:"jsx-1b2b3416d8f3e1f2 font-bold text-sm text-gray-300 group-hover:text-white transition-colors",children:e.label}),(0,a.jsx)("span",{className:"jsx-1b2b3416d8f3e1f2 text-[10px] text-gray-600 font-medium font-mono",children:e.createdAt?new Date(e.createdAt).toLocaleTimeString("fa-IR"):"--:--"})]}),(0,a.jsx)("div",{className:"jsx-1b2b3416d8f3e1f2 "+"\n                            px-2.5 py-1 rounded-lg text-[10px] font-bold border \n                            ".concat(e.win?"bg-emerald-500/5 border-emerald-500/10 text-emerald-500":"bg-red-500/5 border-red-500/10 text-red-500","\n                        "),children:e.win?"بـرد":"باخت"})]},e.id||t))})]})]})]})]}),(0,a.jsx)(l(),{id:"1b2b3416d8f3e1f2",children:".clip-path-marker{-webkit-clip-path:polygon(0%0%,100%0%,50%100%);clip-path:polygon(0%0%,100%0%,50%100%)}.custom-scrollbar::-webkit-scrollbar{width:4px}.custom-scrollbar::-webkit-scrollbar-track{background:rgba(255,255,255,.02)}.custom-scrollbar::-webkit-scrollbar-thumb{background:#27272a;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px}.custom-scrollbar::-webkit-scrollbar-thumb:hover{background:#3f3f46}@-webkit-keyframes gradient-xy{0%,100%{background-position:0%50%}50%{background-position:100%50%}}@-moz-keyframes gradient-xy{0%,100%{background-position:0%50%}50%{background-position:100%50%}}@-o-keyframes gradient-xy{0%,100%{background-position:0%50%}50%{background-position:100%50%}}@keyframes gradient-xy{0%,100%{background-position:0%50%}50%{background-position:100%50%}}.animate-gradient-xy{-webkit-background-size:200%200%;-moz-background-size:200%200%;-o-background-size:200%200%;background-size:200%200%;-webkit-animation:gradient-xy 3s ease infinite;-moz-animation:gradient-xy 3s ease infinite;-o-animation:gradient-xy 3s ease infinite;animation:gradient-xy 3s ease infinite}"})]})}},7766:function(e,t,s){"use strict";s.d(t,{H:function(){return d},a:function(){return c}});var a=s(7437),r=s(2265),l=s(1837),n=s(5572);let i=(0,r.createContext)(null);async function o(){return(0,l.Nv)("/me",{method:"GET"},{auth:!0})}function d(e){let{children:t}=e,[s,d]=(0,r.useState)(null),[c,x]=(0,r.useState)(!0),b=(0,r.useCallback)(async()=>{try{let e=await o();d(e)}catch(e){d(null)}},[]);(0,r.useEffect)(()=>{let e=!0;return(async()=>{try{let t=await o();e&&d(t)}catch(t){e&&d(null)}finally{e&&x(!1)}})(),()=>{e=!1}},[]);let f=(0,r.useCallback)(async e=>{let{email:t,password:s}=e,a=await (0,l.Nv)("/auth/login",{method:"POST",body:JSON.stringify({email:t,password:s})},{auth:!1});return(0,l.vD)({accessToken:a.accessToken,refreshToken:a.refreshToken}),(0,n.DM)(a.user),d(a.user),a.user},[]),u=(0,r.useCallback)(async e=>{let{email:t,password:s,referralCode:a}=e;await (0,l.Nv)("/auth/register",{method:"POST",body:JSON.stringify({email:t,password:s,referralCode:a})},{auth:!1})},[]),m=(0,r.useCallback)(async()=>{try{await (0,l.Nv)("/auth/logout",{method:"POST",body:JSON.stringify({})})}catch(e){}finally{(0,l.Je)(),(0,n.DM)(null),d(null)}},[]),h=(0,r.useMemo)(()=>({user:s,isLoading:c,isAuthenticated:!!s,login:f,register:u,logout:m,refreshMe:b}),[s,c,f,u,m,b]);return(0,a.jsx)(i.Provider,{value:h,children:t})}function c(){let e=(0,r.useContext)(i);if(!e)throw Error("useAuth must be used within AuthProvider");return e}}},function(e){e.O(0,[5186,4072,2123,5860,1837,2971,2117,1744],function(){return e(e.s=5347)}),_N_E=e.O()}]);