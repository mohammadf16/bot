(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3642],{8519:function(e,r,t){Promise.resolve().then(t.bind(t,4988))},4988:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return c}});var n=t(7437),s=t(2265),a=t(5186),i=t(1837),l=t(7921);function c(){let[e,r]=(0,s.useState)("5000000"),[t,c]=(0,s.useState)({}),[d,u]=(0,s.useState)([]);async function o(){try{let e=await (0,i.Nv)("/loans/me");u(e.items)}catch(e){a.ZP.error(e instanceof Error?e.message:"خطا در دریافت وام ها")}}async function m(){let r=(0,l.C)(e);if(!r)return a.ZP.error("مبلغ معتبر نیست");try{await (0,i.Nv)("/loans/request",{method:"POST",body:JSON.stringify({amount:r,dueDays:60})}),a.ZP.success("درخواست وام ثبت شد"),await o()}catch(e){a.ZP.error(e instanceof Error?e.message:"خطا در ثبت وام")}}async function h(e){var r;let n=(0,l.C)(null!==(r=t[e])&&void 0!==r?r:"");if(!n)return a.ZP.error("مبلغ بازپرداخت معتبر نیست");try{await (0,i.Nv)("/loans/".concat(e,"/repay"),{method:"POST",body:JSON.stringify({amount:n})}),a.ZP.success("بازپرداخت ثبت شد"),await o()}catch(e){a.ZP.error(e instanceof Error?e.message:"بازپرداخت ناموفق بود")}}return(0,s.useEffect)(()=>{o()},[]),(0,n.jsx)("main",{className:"min-h-screen pt-32 pb-20",dir:"rtl",children:(0,n.jsxs)("div",{className:"max-w-5xl mx-auto px-4 space-y-8",children:[(0,n.jsxs)("section",{className:"card glass p-8",children:[(0,n.jsx)("h1",{className:"text-4xl font-black mb-3",children:"وام خودرو (VIP طلایی به بالا)"}),(0,n.jsx)("p",{className:"text-white/70 mb-4",children:"حداکثر ۵ میلیون تومان؛ اعتبار وام تا تسویه، برداشت‌پذیر نیست."}),(0,n.jsxs)("div",{className:"flex gap-3",children:[(0,n.jsx)("input",{value:e,onChange:e=>r(e.target.value),className:"flex-1 bg-dark-bg/50 rounded-xl px-4 py-3 border border-dark-border",placeholder:"مبلغ وام"}),(0,n.jsx)("button",{onClick:m,className:"btn-primary",children:"درخواست وام"})]})]}),(0,n.jsxs)("section",{className:"card glass p-8",children:[(0,n.jsx)("h2",{className:"text-2xl font-black mb-4",children:"وام های من"}),(0,n.jsxs)("div",{className:"space-y-3",children:[d.map(e=>{var r;return(0,n.jsxs)("div",{className:"rounded-xl border border-white/10 bg-black/20 p-4",children:[(0,n.jsxs)("p",{children:["شناسه: ",e.id]}),(0,n.jsxs)("p",{children:["وضعیت: ",(0,n.jsx)("b",{children:e.status})]}),(0,n.jsxs)("p",{children:["اصل: ",(0,l.d)(e.principalIrr)," تومان"]}),(0,n.jsxs)("p",{children:["باقیمانده: ",(0,l.d)(e.outstandingIrr)," تومان"]}),(0,n.jsxs)("p",{children:["سررسید: ",e.dueAt?new Date(e.dueAt).toLocaleString("fa-IR"):"-"]}),"active"===e.status||"approved"===e.status?(0,n.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,n.jsx)("input",{value:null!==(r=t[e.id])&&void 0!==r?r:"",onChange:r=>c(t=>({...t,[e.id]:r.target.value})),className:"flex-1 bg-dark-bg/50 rounded-lg px-3 py-2 border border-dark-border",placeholder:"مبلغ بازپرداخت"}),(0,n.jsx)("button",{onClick:()=>h(e.id),className:"btn-secondary",children:"بازپرداخت"})]}):null]},e.id)}),d.length?null:(0,n.jsx)("p",{className:"text-white/60",children:"هنوز وامی ثبت نشده است."})]})]})]})})}},7921:function(e,r,t){"use strict";function n(e){return(Number.isFinite(e)?Math.trunc(e):0).toLocaleString("fa-IR")}function s(e){if(!e.trim())return null;let r=e.split("").map(e=>{let r="۰۱۲۳۴۵۶۷۸۹".indexOf(e);if(r>=0)return String(r);let t="٠١٢٣٤٥٦٧٨٩".indexOf(e);return t>=0?String(t):e}).join("").toLowerCase().replace(/,/g,"").trim(),t=r.includes("million")||r.includes("میلیون")||/\d+(\.\d+)?\s*m\b/.test(r),n=Number(r.replace(/[^\d.]/g,""));if(!Number.isFinite(n)||n<=0)return null;let s=Math.trunc(t?1e6*n:n);return s<=0?null:s}t.d(r,{C:function(){return s},d:function(){return n}})}},function(e){e.O(0,[5186,1837,2971,2117,1744],function(){return e(e.s=8519)}),_N_E=e.O()}]);