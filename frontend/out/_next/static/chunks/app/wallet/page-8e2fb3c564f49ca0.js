(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3597],{6333:function(e,t,s){Promise.resolve().then(s.bind(s,7556))},7556:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var a=s(7437),l=s(2265),r=s(5186),n=s(1837),c=s(7766),i=s(7921);function d(){var e,t;let{isAuthenticated:s}=(0,c.a)(),[d,o]=(0,l.useState)(""),[u,m]=(0,l.useState)(""),[x,h]=(0,l.useState)("5000000"),[b,N]=(0,l.useState)("1"),[f,g]=(0,l.useState)(null),[p,v]=(0,l.useState)(!0);async function j(){v(!0);try{let e=await (0,n.Nv)("/wallet",{method:"GET"});g(e)}catch(e){r.ZP.error(e instanceof Error?e.message:"خطا در دریافت کیف پول")}finally{v(!1)}}async function y(){let e=(0,i.C)(d);if(!e)return r.ZP.error("مبلغ معتبر نیست");try{await (0,n.Nv)("/wallet/deposit",{method:"POST",headers:{"Idempotency-Key":(0,n.c8)()},body:JSON.stringify({amount:e})}),o(""),r.ZP.success("شارژ کیف پول انجام شد"),await j()}catch(e){r.ZP.error(e instanceof Error?e.message:"خطا در شارژ کیف پول")}}async function k(){let e=(0,i.C)(u);if(!e)return r.ZP.error("مبلغ برداشت معتبر نیست");try{let t,s;if(e>=1e8){let e=await (0,n.Nv)("/security/2fa/challenge",{method:"POST",body:JSON.stringify({channel:"sms"})});t=e.challengeId,s=e.debugCode}await (0,n.Nv)("/wallet/withdraw",{method:"POST",headers:{"Idempotency-Key":(0,n.c8)()},body:JSON.stringify({amount:e,iban:"IR000000000000000000000000",challengeId:t,twoFactorCode:s})}),m(""),r.ZP.success("درخواست برداشت ثبت شد"),await j()}catch(e){r.ZP.error(e instanceof Error?e.message:"خطا در برداشت")}}async function w(){let e=Number(b);if(!Number.isFinite(e)||e<=0)return r.ZP.error("مقدار سوت معتبر نیست");try{await (0,n.Nv)("/wallet/convert/gold-to-cash",{method:"POST",body:JSON.stringify({goldSot:e})}),r.ZP.success("تبدیل طلا به تومان انجام شد"),await j()}catch(e){r.ZP.error(e instanceof Error?e.message:"تبدیل انجام نشد")}}async function S(){try{await (0,n.Nv)("/wallet/convert/micro-to-chance",{method:"POST",body:JSON.stringify({})}),r.ZP.success("پول خرد به شانس تبدیل شد"),await j()}catch(e){r.ZP.error(e instanceof Error?e.message:"تبدیل انجام نشد")}}async function P(){let e=(0,i.C)(x);if(!e)return r.ZP.error("مبلغ وام معتبر نیست");try{await (0,n.Nv)("/wallet/loan/request",{method:"POST",body:JSON.stringify({amount:e})}),r.ZP.success("وام ویژه ثبت و واریز شد"),await j()}catch(e){r.ZP.error(e instanceof Error?e.message:"وام تایید نشد")}}(0,l.useEffect)(()=>{if(!s){v(!1);return}j()},[s]);let C=(0,l.useMemo)(()=>{var e,t,s,a,l,r,n,c,i,d,o,u,m;return{irr:null!==(r=null!==(l=null==f?void 0:f.assets.irr)&&void 0!==l?l:null==f?void 0:f.balance)&&void 0!==r?r:0,goldSot:null!==(n=null==f?void 0:f.assets.goldSot)&&void 0!==n?n:0,chances:null!==(i=null!==(c=null==f?void 0:f.assets.chance)&&void 0!==c?c:null==f?void 0:f.chances)&&void 0!==i?i:0,vip:null!==(d=null==f?void 0:null===(e=f.vip)||void 0===e?void 0:e.name)&&void 0!==d?d:"برنزی",cashback:null!==(o=null==f?void 0:null===(t=f.vip)||void 0===t?void 0:t.cashbackPercent)&&void 0!==o?o:20,locked:null!==(u=null==f?void 0:null===(s=f.loan)||void 0===s?void 0:s.lockedBalance)&&void 0!==u?u:0,threshold:null!==(m=null==f?void 0:null===(a=f.rates)||void 0===a?void 0:a.microToChanceThresholdIrr)&&void 0!==m?m:5e4}},[f]);return s?(0,a.jsx)("main",{className:"min-h-screen pt-32 pb-20",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-4 text-right",dir:"rtl",children:[(0,a.jsx)("h1",{className:"text-5xl font-black mb-8",children:"کیف پول چنددارایی"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[(0,a.jsxs)("div",{className:"card glass p-5",children:[(0,a.jsx)("p",{className:"text-dark-text/60 text-sm",children:"اعتبار نقدی"}),(0,a.jsxs)("p",{className:"text-2xl font-black text-accent-gold mt-1",children:[(0,i.d)(C.irr)," تومان"]})]}),(0,a.jsxs)("div",{className:"card glass p-5",children:[(0,a.jsx)("p",{className:"text-dark-text/60 text-sm",children:"طلای آب شده (سوت)"}),(0,a.jsx)("p",{className:"text-2xl font-black mt-1",children:C.goldSot.toLocaleString("fa-IR")})]}),(0,a.jsxs)("div",{className:"card glass p-5",children:[(0,a.jsx)("p",{className:"text-dark-text/60 text-sm",children:"شانس"}),(0,a.jsx)("p",{className:"text-2xl font-black text-accent-cyan mt-1",children:C.chances.toLocaleString("fa-IR")})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[(0,a.jsxs)("div",{className:"card glass p-5",children:[(0,a.jsx)("p",{className:"text-sm text-dark-text/60",children:"سطح VIP"}),(0,a.jsx)("p",{className:"text-xl font-black mt-1",children:C.vip}),(0,a.jsxs)("p",{className:"text-sm text-dark-text/60 mt-1",children:["کش بک: ",C.cashback,"%"]})]}),(0,a.jsxs)("div",{className:"card glass p-5",children:[(0,a.jsx)("p",{className:"text-sm text-dark-text/60",children:"قفل وام"}),(0,a.jsxs)("p",{className:"text-xl font-black mt-1",children:[(0,i.d)(C.locked)," تومان"]})]}),(0,a.jsxs)("div",{className:"card glass p-5",children:[(0,a.jsx)("p",{className:"text-sm text-dark-text/60",children:"پول خردکن"}),(0,a.jsxs)("p",{className:"text-sm mt-1",children:["فقط مبالغ زیر ",(0,i.d)(C.threshold)," تومان"]}),(0,a.jsx)("button",{onClick:S,className:"btn-secondary w-full mt-3",children:"تبدیل پول خرد به شانس"})]})]}),(0,a.jsxs)("section",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"card glass p-8",children:[(0,a.jsx)("h3",{className:"text-xl font-black mb-4",children:"شارژ کیف پول"}),(0,a.jsx)("input",{value:d,onChange:e=>o(e.target.value),placeholder:"مبلغ شارژ (تومان)",className:"w-full bg-dark-bg/50 border border-dark-border/40 rounded-xl px-4 py-3 mb-4"}),(0,a.jsx)("button",{onClick:y,className:"btn-primary w-full",children:"شارژ"})]}),(0,a.jsxs)("div",{className:"card glass p-8",children:[(0,a.jsx)("h3",{className:"text-xl font-black mb-4",children:"برداشت"}),(0,a.jsx)("input",{value:u,onChange:e=>m(e.target.value),placeholder:"مبلغ برداشت (تومان)",className:"w-full bg-dark-bg/50 border border-dark-border/40 rounded-xl px-4 py-3 mb-4"}),(0,a.jsx)("button",{onClick:k,className:"btn-secondary w-full",children:"ثبت درخواست برداشت"})]})]}),(0,a.jsxs)("section",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"card glass p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-black mb-3",children:"تبدیل طلا به تومان"}),(0,a.jsx)("input",{value:b,onChange:e=>N(e.target.value),placeholder:"مقدار سوت",className:"w-full bg-dark-bg/50 border border-dark-border/40 rounded-xl px-4 py-3 mb-3"}),(0,a.jsxs)("p",{className:"text-xs text-dark-text/60 mb-3",children:["نرخ روز: ",(0,i.d)(null!==(t=null==f?void 0:null===(e=f.rates)||void 0===e?void 0:e.goldSellRateIrr)&&void 0!==t?t:0)," برای هر سوت"]}),(0,a.jsx)("button",{onClick:w,className:"btn-primary w-full",children:"تبدیل"})]}),(0,a.jsxs)("div",{className:"card glass p-6 md:col-span-2",children:[(0,a.jsx)("h3",{className:"text-lg font-black mb-3",children:"وام خودرو ویژه VIP طلایی به بالا"}),(0,a.jsx)("input",{value:x,onChange:e=>h(e.target.value),placeholder:"مبلغ وام (تومان)",className:"w-full bg-dark-bg/50 border border-dark-border/40 rounded-xl px-4 py-3 mb-3"}),(0,a.jsx)("p",{className:"text-xs text-dark-text/60 mb-3",children:"مبلغ وام به اعتبار اضافه می‌شود اما تا تسویه برداشت آن محدود است."}),(0,a.jsx)("button",{onClick:P,className:"btn-secondary w-full",children:"درخواست وام"})]})]}),(0,a.jsxs)("section",{className:"card glass p-8 overflow-hidden",children:[(0,a.jsx)("h3",{className:"text-2xl font-black mb-4",children:"تاریخچه تراکنش ها"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-sm min-w-[520px]",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"text-dark-text/50 border-b border-dark-border/40",children:[(0,a.jsx)("th",{className:"text-right py-3",children:"تاریخ"}),(0,a.jsx)("th",{className:"text-right py-3",children:"نوع"}),(0,a.jsx)("th",{className:"text-right py-3",children:"مبلغ"}),(0,a.jsx)("th",{className:"text-right py-3",children:"وضعیت"})]})}),(0,a.jsx)("tbody",{children:p?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:"py-3",colSpan:4,children:"در حال بارگذاری..."})}):null==f?void 0:f.transactions.map(e=>(0,a.jsxs)("tr",{className:"border-b border-dark-border/20",children:[(0,a.jsx)("td",{className:"py-3",children:new Date(e.createdAt).toLocaleString("fa-IR")}),(0,a.jsx)("td",{className:"py-3",children:e.type}),(0,a.jsx)("td",{className:"py-3 font-black",children:(0,i.d)(e.amount)}),(0,a.jsx)("td",{className:"py-3",children:e.status})]},e.id))})]})})]})]})}):(0,a.jsx)("main",{className:"min-h-screen pt-32 pb-20",children:(0,a.jsx)("div",{className:"max-w-3xl mx-auto px-4 text-right",dir:"rtl",children:(0,a.jsxs)("div",{className:"card glass p-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-black mb-3",children:"کیف پول چنددارایی"}),(0,a.jsx)("p",{className:"text-dark-text/60",children:"برای دسترسی ابتدا وارد حساب شوید."})]})})})}},7766:function(e,t,s){"use strict";s.d(t,{H:function(){return d},a:function(){return o}});var a=s(7437),l=s(2265),r=s(1837),n=s(5572);let c=(0,l.createContext)(null);async function i(){return(0,r.Nv)("/me",{method:"GET"},{auth:!0})}function d(e){let{children:t}=e,[s,d]=(0,l.useState)(null),[o,u]=(0,l.useState)(!0),m=(0,l.useCallback)(async()=>{try{let e=await i();d(e)}catch(e){d(null)}},[]);(0,l.useEffect)(()=>{let e=!0;return(async()=>{try{let t=await i();e&&d(t)}catch(t){e&&d(null)}finally{e&&u(!1)}})(),()=>{e=!1}},[]);let x=(0,l.useCallback)(async e=>{let{email:t,password:s}=e,a=await (0,r.Nv)("/auth/login",{method:"POST",body:JSON.stringify({email:t,password:s})},{auth:!1});return(0,r.vD)({accessToken:a.accessToken,refreshToken:a.refreshToken}),(0,n.DM)(a.user),d(a.user),a.user},[]),h=(0,l.useCallback)(async e=>{let{email:t,password:s,referralCode:a}=e;await (0,r.Nv)("/auth/register",{method:"POST",body:JSON.stringify({email:t,password:s,referralCode:a})},{auth:!1})},[]),b=(0,l.useCallback)(async()=>{try{await (0,r.Nv)("/auth/logout",{method:"POST",body:JSON.stringify({})})}catch(e){}finally{(0,r.Je)(),(0,n.DM)(null),d(null)}},[]),N=(0,l.useMemo)(()=>({user:s,isLoading:o,isAuthenticated:!!s,login:x,register:h,logout:b,refreshMe:m}),[s,o,x,h,b,m]);return(0,a.jsx)(c.Provider,{value:N,children:t})}function o(){let e=(0,l.useContext)(c);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},7921:function(e,t,s){"use strict";function a(e){return(Number.isFinite(e)?Math.trunc(e):0).toLocaleString("fa-IR")}function l(e){if(!e.trim())return null;let t=e.split("").map(e=>{let t="۰۱۲۳۴۵۶۷۸۹".indexOf(e);if(t>=0)return String(t);let s="٠١٢٣٤٥٦٧٨٩".indexOf(e);return s>=0?String(s):e}).join("").toLowerCase().replace(/,/g,"").trim(),s=t.includes("million")||t.includes("میلیون")||/\d+(\.\d+)?\s*m\b/.test(t),a=Number(t.replace(/[^\d.]/g,""));if(!Number.isFinite(a)||a<=0)return null;let l=Math.trunc(s?1e6*a:a);return l<=0?null:l}s.d(t,{C:function(){return l},d:function(){return a}})}},function(e){e.O(0,[5186,1837,2971,2117,1744],function(){return e(e.s=6333)}),_N_E=e.O()}]);