(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7048],{4203:function(e,t,r){Promise.resolve().then(r.bind(r,3877))},4401:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8755).Z)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},5621:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8755).Z)("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]])},4286:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8755).Z)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},2023:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8755).Z)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]])},5805:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8755).Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},1239:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8755).Z)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},257:function(e,t,r){"use strict";var a,n;e.exports=(null==(a=r.g.process)?void 0:a.env)&&"object"==typeof(null==(n=r.g.process)?void 0:n.env)?r.g.process:r(4227)},4227:function(e){!function(){var t={229:function(e){var t,r,a,n=e.exports={};function s(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function l(e){if(t===setTimeout)return setTimeout(e,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:s}catch(e){t=s}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}}();var c=[],o=!1,d=-1;function u(){o&&a&&(o=!1,a.length?c=a.concat(c):d=-1,c.length&&x())}function x(){if(!o){var e=l(u);o=!0;for(var t=c.length;t;){for(a=c,c=[];++d<t;)a&&a[d].run();d=-1,t=c.length}a=null,o=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function h(){}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new m(e,t)),1!==c.length||o||l(x)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=h,n.addListener=h,n.once=h,n.off=h,n.removeListener=h,n.removeAllListeners=h,n.emit=h,n.prependListener=h,n.prependOnceListener=h,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}}},r={};function a(e){var n=r[e];if(void 0!==n)return n.exports;var s=r[e]={exports:{}},i=!0;try{t[e](s,s.exports,a),i=!1}finally{i&&delete r[e]}return s.exports}a.ab="//";var n=a(229);e.exports=n}()},3877:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return P}});var a=r(7437),n=r(2265),s=r(4072),i=r(9799),l=r(5095),c=r(3999),o=r(1906),d=r(5750),u=r(1534),x=r(9394),m=r(6717),h=r(8345),p=r(2888);let f=e=>e&&"object"==typeof e&&e.mix,b=e=>f(e)?e.mix:void 0;var g=r(5753),v=r(3576),y=r(3078);function w(e,t){let r=(0,v.h)(()=>[]);return(0,g.N)(e,()=>{r.length=0;let a=e.length;for(let t=0;t<a;t++)r[t]=e[t].get();return t(r)})}var j=r(4286),N=r(5805),k=r(2023),S=r(1239),E=r(4401);let T=(0,r(8755).Z)("cpu",[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]]);var z=r(9474),M=r(5621),I=r(1837),C=r(7921),L=r(7766),_=r(5186);let Z=e=>e<=10?{level:"critical",color:"#ef4444"}:e<=60?{level:"warning",color:"#f59e0b"}:{level:"calm",color:"#06b6d4"};function P(){var e,t,r,l,c,o,d,u;let{user:x}=(0,L.a)(),[m,h]=(0,n.useState)(null),[p,f]=(0,n.useState)(null),[b,g]=(0,n.useState)(1),[v,y]=(0,n.useState)(!1),[w,T]=(0,n.useState)(Date.now()),[z,M]=(0,n.useState)(!0),P=(0,n.useRef)(!1);async function Y(){if(!P.current)try{var e;let t=await (0,I.Nv)("/slide/draw/current",{method:"GET"},{auth:!1});if(m&&"drawn"!==m.status&&"drawn"===t.draw.status&&(P.current=!0,setTimeout(()=>{P.current=!1},8e3)),h(t.draw),x&&(null===(e=t.draw)||void 0===e?void 0:e.id))try{f(await (0,I.Nv)("/slide/draw/current/me",{method:"GET"}))}catch(e){f(null)}else f(null)}finally{M(!1)}}async function K(){if(m){if(!x)return _.ZP.error("برای ثبت شانس ابتدا وارد شوید");if("scheduled"!==m.status)return _.ZP.error("قرعه کشی باز نیست");if(!Number.isInteger(b)||b<1)return _.ZP.error("تعداد شانس نامعتبر است");y(!0);try{let e=await (0,I.Nv)("/slide/draw/".concat(m.id,"/entries"),{method:"POST",body:JSON.stringify({chancesToUse:b})});_.ZP.success("".concat(e.chancesUsed.toLocaleString("fa-IR")," شانس ثبت شد")),f(t=>{var r;return{drawId:m.id,status:m.status,myEntryNumbers:[...null!==(r=null==t?void 0:t.myEntryNumbers)&&void 0!==r?r:[],...e.assignedNumbers].sort((e,t)=>e-t),myEntriesCount:e.myEntriesCount,availableChances:e.availableChances}}),await Y()}catch(e){_.ZP.error(e instanceof Error?e.message:"ثبت شانس انجام نشد")}finally{y(!1)}}}(0,n.useEffect)(()=>{Y();let e=setInterval(()=>T(Date.now()),1e3),t=setInterval(()=>void Y(),3e3);return()=>{clearInterval(e),clearInterval(t)}},[x]);let Q=(0,n.useMemo)(()=>{if(!m||"scheduled"!==m.status)return null;let e=new Date(m.scheduledAt).getTime()-w;if(e<=0)return{h:"00",m:"00",s:"00",totalSeconds:0,expired:!0,urgency:{level:"critical",color:"#ef4444"}};let t=Math.floor(e/1e3);return{h:String(Math.floor(t/3600)).padStart(2,"0"),m:String(Math.floor(t%3600/60)).padStart(2,"0"),s:String(t%60).padStart(2,"0"),totalSeconds:t,expired:!1,urgency:Z(t)}},[m,w]),$=(0,n.useMemo)(()=>!Q||Q.expired?{percent:100,color:"#ef4444",isCritical:!0}:{percent:100-Math.min(3600,Q.totalSeconds)/3600*100,color:Q.urgency.color,isCritical:"critical"===Q.urgency.level},[Q]);return z?(0,a.jsx)(F,{}):(0,a.jsxs)("main",{className:"min-h-screen bg-[#020202] text-white pt-24 pb-20 px-4 selection:bg-cyan-500/30 relative overflow-x-hidden",dir:"rtl",children:[(0,a.jsx)(V,{}),(0,a.jsx)(R,{progress:$.percent,color:$.color,isCritical:$.isCritical}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto relative z-10",children:[(0,a.jsxs)("header",{className:"text-center mb-16 relative z-30",children:[(0,a.jsxs)(s.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-cyan-500/5 border border-cyan-500/20 text-[10px] font-black tracking-[0.3em] text-cyan-400 mb-6 uppercase backdrop-blur-md",children:[(0,a.jsx)(j.Z,{size:12}),"Secure & Provably Fair"]}),(0,a.jsx)(s.E.h1,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-[clamp(2rem,8vw,4.5rem)] md:text-[clamp(3rem,7vw,6.5rem)] font-[900] leading-[1.05] tracking-tight mb-4 bg-gradient-to-b from-white via-white to-gray-400 bg-clip-text text-transparent drop-shadow-2xl relative px-2 py-2",children:"ماشین اسلاید"}),(0,a.jsx)(s.E.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-white/40 text-sm md:text-xl max-w-3xl mx-auto font-medium leading-relaxed",children:"سیستم هوشمند انتخاب برنده با الگوریتم‌های رمزنگاری غیرقابل تغییر."})]}),m?(0,a.jsxs)("div",{className:"space-y-12 relative z-20",children:[(0,a.jsx)(s.E.div,{layout:!0,className:"relative rounded-[3.5rem] p-[1px] bg-gradient-to-b from-white/10 via-white/5 to-transparent shadow-[0_20px_100px_-20px_rgba(0,0,0,0.7)]",children:(0,a.jsxs)("div",{className:"bg-[#050505]/90 backdrop-blur-2xl rounded-[3.4rem] p-10 md:p-16 relative overflow-hidden min-h-[500px] flex flex-col items-center justify-center",children:[(0,a.jsx)(D,{status:m.status,urgencyLevel:null==Q?void 0:Q.urgency.level}),(0,a.jsx)(U,{status:m.status,urgency:null==Q?void 0:Q.urgency.level}),(0,a.jsx)("h2",{className:"text-3xl md:text-5xl font-black text-center mb-12 max-w-4xl leading-tight relative z-10 drop-shadow-lg",children:m.title}),"scheduled"===m.status&&(0,a.jsxs)("div",{className:"w-full max-w-3xl mb-10 p-4 md:p-5 rounded-3xl border border-cyan-500/20 bg-cyan-500/5 relative z-10",children:[(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-3 items-end",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[11px] text-white/50 mb-1",children:"شانس باقی مانده"}),(0,a.jsx)("p",{className:"text-xl font-black text-cyan-300",children:(null!==(c=null!==(l=null==p?void 0:p.availableChances)&&void 0!==l?l:null==x?void 0:x.chances)&&void 0!==c?c:0).toLocaleString("fa-IR")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-[11px] text-white/50 mb-1 block",children:"تعداد شانس برای این قرعه"}),(0,a.jsx)("input",{type:"number",min:1,value:b,onChange:e=>g(Math.max(1,Number(e.target.value||1))),className:"w-full rounded-xl bg-black/30 border border-white/15 px-3 py-2 text-sm outline-none focus:border-cyan-400"})]}),(0,a.jsx)("button",{onClick:()=>void K(),disabled:v,className:"h-[42px] rounded-xl bg-cyan-500/80 hover:bg-cyan-400 text-black font-black text-sm disabled:opacity-60",children:v?"در حال ثبت...":"ثبت شانس و دریافت شماره یونیک"})]}),(0,a.jsxs)("div",{className:"mt-3 text-xs text-white/65",children:["شماره های ثبت شده شما: ",(0,a.jsxs)("span",{className:"text-cyan-300 font-bold",children:[(null!==(o=null==p?void 0:p.myEntriesCount)&&void 0!==o?o:0).toLocaleString("fa-IR")," عدد"]})]})]}),(0,a.jsx)("div",{className:"w-full flex justify-center relative z-10",children:(0,a.jsxs)(i.M,{mode:"wait",children:["scheduled"===m.status&&Q&&!Q.expired&&(0,a.jsxs)(s.E.div,{exit:{opacity:0,scale:.8,filter:"blur(20px)",transition:{duration:.3}},className:"flex flex-wrap justify-center items-center gap-4 md:gap-10 select-none",children:[(0,a.jsx)(A,{value:Q.h,label:"ساعت",urgency:Q.urgency.level}),(0,a.jsx)(O,{urgency:Q.urgency.level}),(0,a.jsx)(A,{value:Q.m,label:"دقیقه",urgency:Q.urgency.level}),(0,a.jsx)(O,{urgency:Q.urgency.level}),(0,a.jsx)(A,{value:Q.s,label:"ثانیه",urgency:Q.urgency.level,isSeconds:!0})]},"countdown"),("processing"===m.status||(null==Q?void 0:Q.expired)&&"scheduled"===m.status)&&(0,a.jsx)(J,{},"processing"),"drawn"===m.status&&void 0!==m.targetNumber&&(0,a.jsx)(H,{targetNumber:m.targetNumber},"result")]})}),"drawn"===m.status&&(null!==(d=null===(e=m.winningLogs)||void 0===e?void 0:e.length)&&void 0!==d?d:0)>1&&(0,a.jsxs)("div",{className:"absolute left-6 top-6 z-20 w-64 max-w-[70vw] rounded-2xl border border-white/15 bg-black/55 backdrop-blur p-3",children:[(0,a.jsx)("p",{className:"text-[11px] text-white/60 mb-2",children:"سایر شماره های برنده"}),(0,a.jsx)("div",{className:"max-h-44 overflow-y-auto custom-scrollbar space-y-1",children:null===(t=m.winningLogs)||void 0===t?void 0:t.filter(e=>1!==e.rank).slice(0,30).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs border-b border-white/10 pb-1",children:[(0,a.jsxs)("span",{className:"text-white/75",children:["رتبه ",e.rank.toLocaleString("fa-IR")]}),(0,a.jsx)("span",{className:"font-mono text-cyan-300",children:e.winningNumber.toLocaleString("fa-IR")})]},"".concat(e.rank,"-").concat(e.winningNumber)))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 w-full max-w-5xl mt-16 border-t border-white/5 pt-8 relative z-10",children:[(0,a.jsx)(B,{icon:(0,a.jsx)(N.Z,{size:20}),label:"شرکت‌کننده",value:m.participants.length.toLocaleString("fa-IR")}),(0,a.jsx)(B,{icon:(0,a.jsx)(k.Z,{size:20}),label:"شماره ثبت شده",value:(null!==(u=m.totalEntries)&&void 0!==u?u:0).toLocaleString("fa-IR")}),(0,a.jsx)(B,{icon:(0,a.jsx)(S.Z,{size:20}),label:"شانس کل",value:m.participants.reduce((e,t)=>e+t.chances,0).toLocaleString("fa-IR")}),(0,a.jsx)(B,{icon:(0,a.jsx)(j.Z,{size:20}),label:"Secure Check",value:"SHA-512"}),(0,a.jsx)(B,{icon:(0,a.jsx)(E.Z,{size:20}),label:"Network",value:"Stable",color:"text-emerald-500"})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-6 md:gap-8 relative z-10",children:[(0,a.jsx)(q,{participants:m.participants}),(0,a.jsx)(X,{status:m.status,prizes:m.prizes,winners:m.winners})]}),(null===(r=m.winningLogs)||void 0===r?void 0:r.length)&&(0,a.jsxs)("section",{className:"rounded-[2rem] border border-white/10 bg-white/[0.03] p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-black mb-4",children:"لاگ شفاف برندگان"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"text-white/50 border-b border-white/10",children:[(0,a.jsx)("th",{className:"py-2 px-3 text-right",children:"رتبه"}),(0,a.jsx)("th",{className:"py-2 px-3 text-right",children:"شماره برنده"}),(0,a.jsx)("th",{className:"py-2 px-3 text-right",children:"برنده"}),(0,a.jsx)("th",{className:"py-2 px-3 text-right",children:"جایزه"})]})}),(0,a.jsx)("tbody",{children:m.winningLogs.map(e=>(0,a.jsxs)("tr",{className:"border-b border-white/5",children:[(0,a.jsx)("td",{className:"py-2 px-3 font-bold",children:e.rank.toLocaleString("fa-IR")}),(0,a.jsx)("td",{className:"py-2 px-3 font-mono text-cyan-300",children:e.winningNumber.toLocaleString("fa-IR")}),(0,a.jsx)("td",{className:"py-2 px-3",children:e.fullName||e.userId}),(0,a.jsxs)("td",{className:"py-2 px-3",children:[e.prize.title,e.prize.amount?" - ".concat((0,C.d)(e.prize.amount)):""]})]},"".concat(e.rank,"-").concat(e.winningNumber)))})]})})]})]}):(0,a.jsx)(G,{})]}),(0,a.jsx)(W,{})]})}function A(e){let{value:t,label:r,urgency:n,isSeconds:l=!1}=e,c="critical"===n,o="warning"===n,d=c?"text-red-500":o?"text-amber-400":"text-white",u=c?"rgba(239,68,68,0.4)":o?"rgba(245,158,11,0.3)":"rgba(6,182,212,0.2)";return(0,a.jsxs)("div",{className:"flex flex-col items-center group relative",children:[(c||o)&&(0,a.jsx)(s.E.div,{animate:{opacity:[.1,.4,.1],scale:[.9,1.1,.9]},transition:{duration:c?.4:1,repeat:1/0,ease:"easeInOut"},className:"absolute inset-0 blur-3xl rounded-full z-0",style:{backgroundColor:u}}),(0,a.jsxs)(s.E.div,{animate:c?{x:[-1,1,-1,1,0],y:[1,-1,1,-1,0],transition:{duration:.1,repeat:1/0,repeatType:"mirror"}}:{},className:"relative z-10 bg-white/[0.04] border border-white/10 rounded-[2.5rem] w-28 h-32 md:w-40 md:h-48 flex items-center justify-center shadow-2xl backdrop-blur-md overflow-hidden",style:{boxShadow:c?"0 0 30px ".concat(u):"",borderColor:c?"rgba(239,68,68,0.3)":""},children:[(0,a.jsx)("div",{className:"absolute top-0 w-full h-1/2 bg-gradient-to-b from-white/5 to-transparent opacity-50"}),(0,a.jsx)(i.M,{mode:"popLayout",children:(0,a.jsx)(s.E.div,{initial:{y:40,opacity:0,filter:"blur(8px)"},animate:{y:0,opacity:1,filter:"blur(0px)",scale:l&&(o||c)?1.1:1},exit:{y:-40,opacity:0,filter:"blur(8px)"},transition:{type:"spring",stiffness:400,damping:20},className:"text-6xl md:text-8xl font-[900] tabular-nums tracking-tighter drop-shadow-2xl ".concat(d," relative"),children:t},t)})]}),(0,a.jsx)("span",{className:"text-[10px] font-black uppercase tracking-[0.4em] mt-5 transition-colors ".concat(c?"text-red-500 animate-pulse":o?"text-amber-400":"text-white/30"),children:r})]})}function O(e){let{urgency:t}=e;return(0,a.jsx)("span",{className:"text-4xl md:text-7xl font-[200] mt-[-30px] hidden md:block ".concat("critical"===t?"text-red-500":"warning"===t?"text-amber-400":"text-white/10"," transition-colors duration-300"),children:":"})}function R(e){let{progress:t,color:r,isCritical:n}=e;return(0,a.jsx)(s.E.div,{animate:n?{y:[-1,1,0],transition:{duration:.1,repeat:1/0}}:{},className:"fixed top-0 left-0 w-full h-2 bg-white/5 z-[100] overflow-hidden",children:(0,a.jsx)(s.E.div,{className:"h-full relative",style:{backgroundColor:r,boxShadow:"0 0 20px ".concat(r)},animate:{width:"".concat(t,"%")},transition:{ease:(0,l._)(.4,0,.2,1),duration:.5},children:(0,a.jsx)("div",{className:"absolute inset-0 w-full h-full animate-[shimmer_1.5s_infinite] skew-x-12 bg-gradient-to-r from-transparent via-white/40 to-transparent"})})})}function D(e){let{status:t,urgencyLevel:r}=e,n="bg-cyan-500/5";return"drawn"===t?n="bg-amber-500/10":"critical"===r?n="bg-red-600/20 animate-pulse":"warning"===r&&(n="bg-amber-500/10"),(0,a.jsx)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[700px] h-[700px] blur-[150px] rounded-full pointer-events-none transition-all duration-700 ".concat(n)})}function U(e){let{status:t,urgency:r}=e,n="scheduled"===t,s=n?"critical"===r?"bg-red-500":"warning"===r?"bg-amber-500":"bg-emerald-500":"bg-amber-600";return(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-10 bg-white/5 px-5 py-2 rounded-full border border-white/5 backdrop-blur-md relative z-10",children:[(0,a.jsxs)("span",{className:"relative flex h-3 w-3",children:[n&&(0,a.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full opacity-75 ".concat(s)}),(0,a.jsx)("span",{className:"relative inline-flex rounded-full h-3 w-3 ".concat(s)})]}),(0,a.jsx)("span",{className:"text-xs font-black uppercase tracking-widest text-white/70",children:n?"critical"===r?"لحظات پایانی":"پخش زنده":"processing"===t?"در حال قرعه‌کشی":"پایان یافته"})]})}function J(){return(0,a.jsxs)(s.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"flex flex-col items-center gap-6 py-10",children:[(0,a.jsxs)("div",{className:"relative w-28 h-28",children:[(0,a.jsx)("div",{className:"absolute inset-0 border-4 border-amber-500/20 rounded-full animate-ping"}),(0,a.jsx)("div",{className:"absolute inset-0 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"}),(0,a.jsx)(T,{className:"absolute inset-0 m-auto text-amber-500 animate-pulse",size:40})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h3",{className:"text-3xl font-black text-amber-500 mb-2 animate-pulse",children:"در حال استخراج برنده..."}),(0,a.jsx)("p",{className:"text-white/50 font-mono text-sm tracking-wider",children:"Verifying Blockchain Integrity"})]})]})}function H(e){let{targetNumber:t}=e,r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{isStatic:r}=(0,n.useContext)(d._),a=(0,n.useRef)(null),s=(0,o.c)((0,c.i)(e)?e.get():e),i=()=>{a.current&&a.current.stop()};return(0,n.useInsertionEffect)(()=>s.attach((e,n)=>{if(r)return n(e);if(i(),a.current=(0,x.y)({keyframes:[s.get(),e],velocity:s.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...t,onUpdate:n}),!h.frameData.isProcessing){let e=performance.now()-h.frameData.timestamp;e<30&&(a.current.time=(0,m.X)(e))}return s.get()},i),[JSON.stringify(t)]),(0,u.L)(()=>{if((0,c.i)(e))return e.on("change",e=>s.set(parseFloat(e)))},[s]),s}(0,{stiffness:60,damping:12}),i=function(e,t,r,a){if("function"==typeof e)return function(e){y.S1.current=[],e();let t=(0,g.N)(y.S1.current,e);return y.S1.current=void 0,t}(e);let n="function"==typeof t?t:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let a=!Array.isArray(t[0]),n=a?0:-1,s=t[0+n],i=t[1+n],l=t[2+n],c=t[3+n],o=(0,p.s)(i,l,{mixer:b(l[0]),...c});return a?o(s):o}(t,void 0,void 0);return Array.isArray(e)?w(e,n):w([e],e=>{let[t]=e;return n(t)})}(r,e=>Math.round(e));return(0,n.useEffect)(()=>{r.set(t)},[t,r]),(0,a.jsxs)(s.E.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},className:"flex flex-col items-center",children:[(0,a.jsx)(s.E.div,{className:"text-[12px] text-amber-400 font-black uppercase tracking-[0.5em] mb-6 animate-pulse",children:"Winning Number"}),(0,a.jsx)("div",{className:"relative px-16 py-8 bg-gradient-to-b from-amber-500/20 to-transparent border-2 border-amber-500/30 rounded-[3rem] overflow-hidden",children:(0,a.jsx)(s.E.div,{className:"text-8xl md:text-[10rem] font-black font-mono tracking-widest text-white",children:(0,a.jsx)(s.E.span,{children:i})})}),(0,a.jsxs)(s.E.div,{className:"mt-10 flex items-center gap-2 text-emerald-400 bg-emerald-500/10 px-8 py-3 rounded-full border border-emerald-500/20",children:[(0,a.jsx)(k.Z,{size:20}),(0,a.jsx)("span",{className:"text-base font-bold",children:"تایید شده توسط بلاکچین"})]})]})}function q(e){let{participants:t}=e;return(0,a.jsx)("div",{className:"col-span-12 lg:col-span-7",children:(0,a.jsxs)("div",{className:"bg-white/[0.02] border border-white/5 rounded-[3rem] p-8 md:p-10 h-[600px] flex flex-col relative overflow-hidden backdrop-blur-sm",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,a.jsxs)("h3",{className:"text-2xl font-black flex items-center gap-4",children:[(0,a.jsx)("div",{className:"p-3 bg-cyan-500/10 rounded-2xl text-cyan-500",children:(0,a.jsx)(N.Z,{size:24})}),"تابلوی شانس"]})}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto pr-4 custom-scrollbar space-y-3",children:t.map((e,t)=>(0,a.jsxs)("div",{className:"p-4 bg-white/[0.03] border border-white/5 rounded-3xl flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-white/10 to-white/5 flex items-center justify-center font-black text-white/30 text-lg",children:t+1}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold text-lg text-white",children:e.fullName}),(0,a.jsxs)("p",{className:"text-[10px] text-white/30",children:[e.email.split("@")[0],"***"]})]})]}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsx)("p",{className:"text-lg font-black",children:e.chances.toLocaleString("fa-IR")})})]},e.userId))})]})})}function X(e){let{status:t,prizes:r,winners:n}=e;return(0,a.jsx)("div",{className:"col-span-12 lg:col-span-5",children:(0,a.jsxs)("div",{className:"bg-gradient-to-b from-amber-500/[0.05] to-transparent border border-amber-500/10 rounded-[3rem] p-8 md:p-10 h-full relative overflow-hidden backdrop-blur-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-10",children:[(0,a.jsx)("div",{className:"p-3 bg-amber-500/10 rounded-2xl text-amber-500 border border-amber-500/10",children:(0,a.jsx)(z.Z,{size:24})}),(0,a.jsx)("div",{children:(0,a.jsx)("h3",{className:"text-2xl font-black text-white",children:"جوایز رویداد"})})]}),(0,a.jsx)("div",{className:"space-y-4",children:"drawn"===t&&n?n.map(e=>(0,a.jsxs)("div",{className:"p-5 bg-gradient-to-r from-amber-500/20 to-black/40 border border-amber-500/40 rounded-3xl",children:[(0,a.jsx)("p",{className:"font-bold text-lg text-white",children:e.fullName}),(0,a.jsxs)("p",{className:"text-xs text-amber-200",children:[e.prize.title,e.prize.amount?" - ".concat((0,C.d)(e.prize.amount)):""]})]},e.rank)):r.map((e,t)=>(0,a.jsxs)("div",{className:"p-5 bg-white/[0.03] border border-white/5 rounded-3xl flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-bold text-white/80",children:e.title}),e.amount&&(0,a.jsx)("span",{className:"text-sm font-black text-amber-500",children:(0,C.d)(e.amount)})]},t))})]})})}function B(e){let{icon:t,label:r,value:n,color:s="text-white"}=e;return(0,a.jsxs)("div",{className:"p-6 rounded-[2.5rem] bg-white/[0.03] border border-white/5 flex flex-col items-center text-center",children:[(0,a.jsx)("div",{className:"text-white/20 mb-3",children:t}),(0,a.jsx)("p",{className:"text-[9px] font-black text-white/30 uppercase tracking-[0.2em] mb-2",children:r}),(0,a.jsx)("p",{className:"text-xl md:text-2xl font-black ".concat(s),children:n})]})}function F(){return(0,a.jsx)("div",{className:"min-h-screen bg-[#020202] flex items-center justify-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,a.jsxs)("div",{className:"relative w-20 h-20",children:[(0,a.jsx)("div",{className:"absolute inset-0 border-4 border-cyan-500/20 rounded-full"}),(0,a.jsx)("div",{className:"absolute inset-0 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin"})]}),(0,a.jsx)("p",{className:"text-cyan-500/50 text-xs font-black tracking-widest uppercase animate-pulse",children:"System Loading"})]})})}function G(){return(0,a.jsxs)(s.E.div,{initial:{opacity:0},animate:{opacity:1},className:"py-40 text-center rounded-[3rem] bg-white/[0.02] border border-white/5",children:[(0,a.jsx)(M.Z,{size:64,className:"mx-auto text-white/5 mb-8"}),(0,a.jsx)("h2",{className:"text-3xl font-black text-white/20 uppercase tracking-widest italic",children:"در انتظار تخصیص رویداد"})]})}function V(){return(0,a.jsxs)("div",{className:"fixed inset-0 pointer-events-none z-0",children:[(0,a.jsx)("div",{className:"absolute top-[-10%] left-[-10%] w-[70%] h-[70%] bg-cyan-600/5 blur-[120px] rounded-full animate-pulse"}),(0,a.jsx)("div",{className:"absolute bottom-[-10%] right-[-10%] w-[70%] h-[70%] bg-purple-600/5 blur-[120px] rounded-full animate-pulse"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-[#020202] via-transparent to-transparent"})]})}function W(){return(0,a.jsx)("style",{dangerouslySetInnerHTML:{__html:".custom-scrollbar::-webkit-scrollbar{width:4px}.custom-scrollbar::-webkit-scrollbar-thumb{background:rgba(255,255,255,.05);border-radius:20px}@keyframes shimmer{from{transform:translateX(-100%)}to{transform:translateX(100%)}}"}})}},1837:function(e,t,r){"use strict";r.d(t,{Je:function(){return u},Nv:function(){return h},c8:function(){return p},hP:function(){return o},vD:function(){return d}});var a,n=r(257);let s=null!==(a=n.env.NEXT_PUBLIC_API_URL)&&void 0!==a?a:"http://localhost:4000/api/v1",i=n.env.NEXT_PUBLIC_API_GATEWAY_KEY,l="car_access_token",c="car_refresh_token";function o(){return localStorage.getItem(l)}function d(e){localStorage.setItem(l,e.accessToken),localStorage.setItem(c,e.refreshToken)}function u(){localStorage.removeItem(l),localStorage.removeItem(c)}async function x(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,a=new Headers(t.headers);void 0!==t.body&&null!==t.body&&a.set("Content-Type","application/json"),i&&a.set("x-api-gateway-key",i),r&&a.set("Authorization","Bearer ".concat(r));let n=await fetch("".concat(s).concat(e),{...t,headers:a});if(!n.ok){var l,c;let e=await n.json().catch(()=>({}));throw Error(null!==(c=null!==(l=e.error)&&void 0!==l?l:e.message)&&void 0!==c?c:"HTTP_".concat(n.status))}return 204===n.status?{}:await n.json()}async function m(){let e=localStorage.getItem(c);if(!e)return null;try{let t=await x("/auth/refresh",{method:"POST",body:JSON.stringify({refreshToken:e})});return d(t),t.accessToken}catch(e){return u(),null}}async function h(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{auth:!0},n=null===(t=a.auth)||void 0===t||t,s=n?o():void 0;try{return await x(e,r,null!=s?s:void 0)}catch(a){if(!n)throw a;let t=await m();if(!t)throw a;return x(e,r,t)}}function p(){return"undefined"!=typeof crypto&&"randomUUID"in crypto?crypto.randomUUID():"idemp-".concat(Date.now(),"-").concat(Math.random().toString(16).slice(2))}},7766:function(e,t,r){"use strict";r.d(t,{H:function(){return c},a:function(){return o}});var a=r(7437),n=r(2265),s=r(1837);let i=(0,n.createContext)(null);async function l(){return(0,s.Nv)("/me",{method:"GET"},{auth:!0})}function c(e){let{children:t}=e,[r,c]=(0,n.useState)(null),[o,d]=(0,n.useState)(!0),u=(0,n.useCallback)(async()=>{c(await l())},[]);(0,n.useEffect)(()=>{let e=!0;return(async()=>{try{let t=await l();e&&c(t)}catch(t){e&&c(null)}finally{e&&d(!1)}})(),()=>{e=!1}},[]);let x=(0,n.useCallback)(async e=>{let{email:t,password:r}=e,a=await (0,s.Nv)("/auth/login",{method:"POST",body:JSON.stringify({email:t,password:r})},{auth:!1});return(0,s.vD)({accessToken:a.accessToken,refreshToken:a.refreshToken}),c(a.user),a.user},[]),m=(0,n.useCallback)(async e=>{let{email:t,password:r,referralCode:a}=e;await (0,s.Nv)("/auth/register",{method:"POST",body:JSON.stringify({email:t,password:r,referralCode:a})},{auth:!1})},[]),h=(0,n.useCallback)(async()=>{try{let e=localStorage.getItem("car_refresh_token");e&&await (0,s.Nv)("/auth/logout",{method:"POST",body:JSON.stringify({refreshToken:e})})}catch(e){}finally{(0,s.Je)(),c(null)}},[]),p=(0,n.useMemo)(()=>({user:r,isLoading:o,isAuthenticated:!!r,login:x,register:m,logout:h,refreshMe:u}),[r,o,x,m,h,u]);return(0,a.jsx)(i.Provider,{value:p,children:t})}function o(){let e=(0,n.useContext)(i);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},7921:function(e,t,r){"use strict";function a(e){return(Number.isFinite(e)?Math.trunc(e):0).toLocaleString("fa-IR")}function n(e){if(!e.trim())return null;let t=e.split("").map(e=>{let t="۰۱۲۳۴۵۶۷۸۹".indexOf(e);if(t>=0)return String(t);let r="٠١٢٣٤٥٦٧٨٩".indexOf(e);return r>=0?String(r):e}).join("").toLowerCase().replace(/,/g,"").trim(),r=t.includes("million")||t.includes("میلیون")||/\d+(\.\d+)?\s*m\b/.test(t),a=Number(t.replace(/[^\d.]/g,""));if(!Number.isFinite(a)||a<=0)return null;let n=Math.trunc(r?1e6*a:a);return n<=0?null:n}r.d(t,{C:function(){return n},d:function(){return a}})}},function(e){e.O(0,[5186,4072,5581,2971,2117,1744],function(){return e(e.s=4203)}),_N_E=e.O()}]);