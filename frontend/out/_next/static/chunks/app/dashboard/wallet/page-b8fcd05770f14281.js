(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2064],{4369:function(e,t,r){Promise.resolve().then(r.bind(r,5087))},8755:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var s=r(2265);let l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),i=e=>{let t=n(e);return t.charAt(0).toUpperCase()+t.slice(1)};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1},o=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:o="",children:u,iconNode:h,...x}=e;return(0,s.createElement)("svg",{ref:t,...c,width:a,height:a,stroke:r,strokeWidth:i?24*Number(n)/Number(a):n,className:l("lucide",o),...!u&&!d(x)&&{"aria-hidden":"true"},...x},[...h.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let r=(0,s.forwardRef)((r,n)=>{let{className:c,...d}=r;return(0,s.createElement)(o,{ref:n,iconNode:t,className:l("lucide-".concat(a(i(e))),"lucide-".concat(e),c),...d})});return r.displayName=i(e),r}},1866:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(8755).Z)("arrow-down-left",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]])},7580:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(8755).Z)("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]])},1804:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(8755).Z)("wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]])},5087:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var s=r(7437),l=r(2265),a=r(1804),n=r(1866),i=r(7580),c=r(5186),d=r(1837),o=r(7921);function u(){var e,t,r;let[u,h]=(0,l.useState)(null),[x,m]=(0,l.useState)(!0),[f,b]=(0,l.useState)(""),[p,w]=(0,l.useState)("");async function g(){m(!0);try{let e=await (0,d.Nv)("/wallet",{method:"GET"});h(e)}catch(e){c.ZP.error(e instanceof Error?e.message:"خطا در دریافت اطلاعات کیف پول")}finally{m(!1)}}async function j(){let e=(0,o.C)(f);if(!e)return c.ZP.error("مبلغ شارژ معتبر نیست");try{await (0,d.Nv)("/wallet/deposit",{method:"POST",headers:{"Idempotency-Key":(0,d.c8)()},body:JSON.stringify({amount:e})}),b(""),c.ZP.success("شارژ کیف پول انجام شد"),await g()}catch(e){c.ZP.error(e instanceof Error?e.message:"خطا در شارژ کیف پول")}}async function v(){let e=(0,o.C)(p);if(!e)return c.ZP.error("مبلغ برداشت معتبر نیست");try{await (0,d.Nv)("/wallet/withdraw",{method:"POST",headers:{"Idempotency-Key":(0,d.c8)()},body:JSON.stringify({amount:e,iban:"IR000000000000000000000000"})}),w(""),c.ZP.success("درخواست برداشت ثبت شد"),await g()}catch(e){c.ZP.error(e instanceof Error?e.message:"خطا در برداشت وجه")}}(0,l.useEffect)(()=>{g()},[]);let N=(0,l.useMemo)(()=>{var e;return null!==(e=null==u?void 0:u.transactions.slice(0,8))&&void 0!==e?e:[]},[u]);return(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"grid lg:grid-cols-3 gap-8",children:[(0,s.jsxs)("div",{className:"lg:col-span-2 bg-gradient-to-br from-accent-gold to-yellow-600 rounded-[2.5rem] p-8 md:p-12 text-black relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),(0,s.jsxs)("div",{className:"relative z-10 flex flex-col gap-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold opacity-60 mb-1",children:"موجودی فعلی"}),(0,s.jsxs)("h2",{className:"text-4xl md:text-6xl font-black tracking-tight",children:[(0,o.d)(null!==(e=null==u?void 0:u.balance)&&void 0!==e?e:0)," ",(0,s.jsx)("span",{className:"text-lg opacity-60 font-bold",children:"تومان"})]})]}),(0,s.jsx)("div",{className:"bg-black/10 p-3 rounded-2xl backdrop-blur-sm",children:(0,s.jsx)(a.Z,{className:"w-8 h-8"})})]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{value:f,onChange:e=>b(e.target.value),placeholder:"مبلغ شارژ (تومان)",className:"w-full bg-white/35 border border-black/15 rounded-2xl px-4 py-3 placeholder:text-black/50"}),(0,s.jsxs)("button",{onClick:j,className:"mt-3 w-full bg-black text-white py-3 rounded-2xl font-bold flex items-center justify-center gap-2",children:[(0,s.jsx)(n.Z,{className:"w-5 h-5"}),"افزایش موجودی"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{value:p,onChange:e=>w(e.target.value),placeholder:"مبلغ برداشت (تومان)",className:"w-full bg-white/35 border border-black/15 rounded-2xl px-4 py-3 placeholder:text-black/50"}),(0,s.jsxs)("button",{onClick:v,className:"mt-3 w-full bg-black/80 text-white py-3 rounded-2xl font-bold flex items-center justify-center gap-2",children:[(0,s.jsx)(i.Z,{className:"w-5 h-5"}),"برداشت وجه"]})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-[#0A0A0A] border border-white/5 p-6 rounded-[2.5rem] h-full flex flex-col justify-center gap-4",children:[(0,s.jsx)("h3",{className:"text-xl font-bold",children:"خلاصه حساب"}),(0,s.jsxs)("div",{className:"flex items-center justify-between border-b border-white/10 py-2",children:[(0,s.jsx)("span",{className:"text-white/60",children:"شانس‌ها"}),(0,s.jsx)("span",{className:"font-black",children:(null!==(t=null==u?void 0:u.chances)&&void 0!==t?t:0).toLocaleString("fa-IR")})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between border-b border-white/10 py-2",children:[(0,s.jsx)("span",{className:"text-white/60",children:"تراکنش‌ها"}),(0,s.jsx)("span",{className:"font-black",children:(null!==(r=null==u?void 0:u.transactions.length)&&void 0!==r?r:0).toLocaleString("fa-IR")})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,s.jsx)("span",{className:"text-white/60",children:"وضعیت"}),(0,s.jsx)("span",{className:"font-black text-emerald-400",children:x?"در حال بارگذاری":"فعال"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-black mb-6",children:"تراکنش‌های اخیر"}),(0,s.jsxs)("div",{className:"space-y-4",children:[N.map(e=>(0,s.jsxs)("div",{className:"bg-[#0A0A0A] border border-white/5 p-5 rounded-3xl flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center ".concat(e.amount<0?"bg-rose-500/10 text-rose-500":"bg-emerald-500/10 text-emerald-500"),children:e.amount<0?(0,s.jsx)(i.Z,{className:"w-6 h-6"}):(0,s.jsx)(n.Z,{className:"w-6 h-6"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold",children:e.type}),(0,s.jsx)("p",{className:"text-xs text-white/30",children:new Date(e.createdAt).toLocaleString("fa-IR")})]})]}),(0,s.jsxs)("p",{className:"font-black text-lg ".concat(e.amount<0?"text-white":"text-emerald-500"),children:[e.amount<0?"-":"+"," ",(0,o.d)(Math.abs(e.amount))]})]},e.id)),N.length||x?null:(0,s.jsx)("div",{className:"bg-[#0A0A0A] border border-white/5 p-5 rounded-3xl text-white/60 text-sm",children:"تراکنشی ثبت نشده است."})]})]})]})}},7921:function(e,t,r){"use strict";function s(e){return(Number.isFinite(e)?Math.trunc(e):0).toLocaleString("fa-IR")}function l(e){if(!e.trim())return null;let t=e.split("").map(e=>{let t="۰۱۲۳۴۵۶۷۸۹".indexOf(e);if(t>=0)return String(t);let r="٠١٢٣٤٥٦٧٨٩".indexOf(e);return r>=0?String(r):e}).join("").toLowerCase().replace(/,/g,"").trim(),r=t.includes("million")||t.includes("میلیون")||/\d+(\.\d+)?\s*m\b/.test(t),s=Number(t.replace(/[^\d.]/g,""));if(!Number.isFinite(s)||s<=0)return null;let l=Math.trunc(r?1e6*s:s);return l<=0?null:l}r.d(t,{C:function(){return l},d:function(){return s}})}},function(e){e.O(0,[5186,1837,2971,2117,1744],function(){return e(e.s=4369)}),_N_E=e.O()}]);