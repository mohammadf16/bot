(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1258],{4450:function(e,t,n){Promise.resolve().then(n.bind(n,8575))},8575:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var a=n(7437),s=n(2265),r=n(5186),i=n(1837);function c(){let[e,t]=(0,s.useState)([]),[n,c]=(0,s.useState)(!0);async function l(){try{let e=await (0,i.Nv)("/me/notifications",{method:"GET"});t(e.items)}catch(e){r.ZP.error(e instanceof Error?e.message:"خطا در دریافت اعلان ها")}finally{c(!1)}}async function o(e){try{await (0,i.Nv)("/me/notifications/".concat(e,"/read"),{method:"POST"}),t(t=>t.map(t=>{var n;return t.id===e?{...t,readAt:null!==(n=t.readAt)&&void 0!==n?n:new Date().toISOString()}:t}))}catch(e){r.ZP.error(e instanceof Error?e.message:"خطا در بروزرسانی اعلان")}}async function d(){try{await (0,i.Nv)("/me/notifications/read-all",{method:"POST"});let e=new Date().toISOString();t(t=>t.map(t=>{var n;return{...t,readAt:null!==(n=t.readAt)&&void 0!==n?n:e}}))}catch(e){r.ZP.error(e instanceof Error?e.message:"خطا در خواندن همه اعلان ها")}}return(0,s.useEffect)(()=>{l()},[]),(0,a.jsxs)("div",{className:"space-y-6",dir:"rtl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,a.jsx)("h1",{className:"text-2xl font-black",children:"اعلان ها"}),(0,a.jsx)("button",{onClick:()=>void d(),className:"btn-secondary text-xs px-4 py-2",children:"خواندن همه"})]}),n?(0,a.jsx)("p",{className:"text-white/50 text-sm",children:"در حال بارگذاری..."}):(0,a.jsxs)("div",{className:"space-y-3",children:[e.map(e=>(0,a.jsxs)("button",{onClick:()=>{e.readAt||o(e.id)},className:"w-full text-right p-4 rounded-2xl border transition ".concat(e.readAt?"bg-white/5 border-white/10":"bg-[#D4AF37]/10 border-[#D4AF37]/30"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,a.jsx)("p",{className:"font-bold",children:e.title}),(0,a.jsx)("span",{className:"text-[10px] text-white/40",children:new Date(e.createdAt).toLocaleString("fa-IR")})]}),e.body?(0,a.jsx)("p",{className:"text-xs text-white/65 mt-2",children:e.body}):null]},e.id)),e.length?null:(0,a.jsx)("p",{className:"text-sm text-white/50",children:"اعلانی ندارید."})]})]})}}},function(e){e.O(0,[5186,1837,2971,2117,1744],function(){return e(e.s=4450)}),_N_E=e.O()}]);