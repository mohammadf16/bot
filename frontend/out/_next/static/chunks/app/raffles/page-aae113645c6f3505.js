(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4869],{3955:function(e,t,s){Promise.resolve().then(s.bind(s,7071))},8755:function(e,t,s){"use strict";s.d(t,{Z:function(){return x}});var a=s(2265);let r=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()},l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),n=e=>{let t=i(e);return t.charAt(0).toUpperCase()+t.slice(1)};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1},d=(0,a.forwardRef)((e,t)=>{let{color:s="currentColor",size:l=24,strokeWidth:i=2,absoluteStrokeWidth:n,className:d="",children:x,iconNode:h,...u}=e;return(0,a.createElement)("svg",{ref:t,...c,width:l,height:l,stroke:s,strokeWidth:n?24*Number(i)/Number(l):i,className:r("lucide",d),...!x&&!o(u)&&{"aria-hidden":"true"},...u},[...h.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(x)?x:[x]])}),x=(e,t)=>{let s=(0,a.forwardRef)((s,i)=>{let{className:c,...o}=s;return(0,a.createElement)(d,{ref:i,iconNode:t,className:r("lucide-".concat(l(n(e))),"lucide-".concat(e),c),...o})});return s.displayName=n(e),s}},2660:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(8755).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},9277:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(8755).Z)("car-front",[["path",{d:"m21 8-2 2-1.5-3.7A2 2 0 0 0 15.646 5H8.4a2 2 0 0 0-1.903 1.257L5 10 3 8",key:"1imjwt"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 14h.01",key:"7oqj8z"}],["rect",{width:"18",height:"8",x:"3",y:"10",rx:"2",key:"a7itu8"}],["path",{d:"M5 18v2",key:"ppbyun"}],["path",{d:"M19 18v2",key:"gy7782"}]])},4286:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(8755).Z)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},2023:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(8755).Z)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]])},5080:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(8755).Z)("ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]])},1239:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(8755).Z)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},7648:function(e,t,s){"use strict";s.d(t,{default:function(){return r.a}});var a=s(2972),r=s.n(a)},7071:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return b}});var a=s(7437),r=s(7648),l=s(2265),i=s(5186),n=s(1837),c=s(7766),o=s(2023),d=s(2660),x=s(5080),h=s(4286),u=s(1239),m=s(9277);function b(){var e,t,s;let{isAuthenticated:b,user:f,refreshMe:p}=(0,c.a)(),[g,y]=(0,l.useState)([]),[j,v]=(0,l.useState)(""),[w,N]=(0,l.useState)(1),[k,S]=(0,l.useState)(null),Z=(0,l.useMemo)(()=>{var e;return null!==(e=g.find(e=>e.id===j))&&void 0!==e?e:null},[g,j]);async function M(){try{let e=await (0,n.Nv)("/raffles",{method:"GET"},{auth:!1});y(e.items);let t=e.items.find(e=>"open"===e.status);v(s=>{var a;return s||(null==t?void 0:t.id)||(null===(a=e.items[0])||void 0===a?void 0:a.id)||""})}catch(e){i.ZP.error(e instanceof Error?e.message:"خطا در دریافت قرعه‌کشی")}}async function P(){if(Z){if(!b)return i.ZP.error("ابتدا وارد شوید");if("open"!==Z.status)return i.ZP.error("این قرعه‌کشی فعلا باز نیست");try{let e=await (0,n.Nv)("/raffles/".concat(Z.id,"/buy"),{method:"POST",headers:{"Idempotency-Key":(0,n.c8)()},body:JSON.stringify({count:w})});S(e),i.ZP.success("خرید انجام شد"),await M(),await p()}catch(e){i.ZP.error(e instanceof Error?e.message:"خرید انجام نشد")}}}async function C(e){if(Z){if(!b)return i.ZP.error("ابتدا وارد شوید");if("open"!==Z.status)return i.ZP.error("این قرعه‌کشی فعلا باز نیست");try{await (0,n.Nv)("/raffles/".concat(Z.id,"/buy-combo"),{method:"POST",body:JSON.stringify({code:e})}),i.ZP.success("پکیج ".concat("silver"===e?"نقره‌ای":"طلایی"," خریداری شد")),await M(),await p()}catch(e){i.ZP.error(e instanceof Error?e.message:"خرید پکیج انجام نشد")}}}(0,l.useEffect)(()=>{M()},[]);let L=(0,l.useMemo)(()=>!Z||Z.maxTickets<=0?0:Math.min(100,Math.round(Z.ticketsSold/Z.maxTickets*100)),[Z]),z=(0,l.useMemo)(()=>Z?"open"===Z.status?"باز":"closed"===Z.status?"بسته":"drawn"===Z.status?"برنده اعلام شده":"پیش‌نویس":"-",[Z]),I=(0,l.useMemo)(()=>{if(!Z)return 0;let e=Z.dynamicPricing,t=e.basePrice*Math.pow(e.decayFactor,Math.max(0,Z.ticketsSold));return Math.max(e.minPrice,Math.floor(t))},[Z]);return(0,a.jsx)("main",{className:"min-h-screen pt-20 pb-16 text-right",dir:"rtl",children:(0,a.jsxs)("div",{className:"mx-auto max-w-7xl space-y-5 px-4 sm:space-y-6 sm:px-6",children:[(0,a.jsxs)("section",{className:"relative overflow-hidden rounded-2xl border border-white/10 bg-gradient-to-br from-[#0B1220] via-[#111827] to-[#1F2937] p-4 sm:p-6",children:[(0,a.jsx)("div",{className:"absolute -top-24 -left-10 h-56 w-56 rounded-full bg-cyan-400/20 blur-3xl"}),(0,a.jsx)("div",{className:"absolute -bottom-24 -right-10 h-56 w-56 rounded-full bg-amber-400/20 blur-3xl"}),(0,a.jsxs)("div",{className:"relative grid grid-cols-1 gap-4 lg:grid-cols-12",children:[(0,a.jsxs)("div",{className:"space-y-3 lg:col-span-8",children:[(0,a.jsxs)("div",{className:"inline-flex items-center gap-2 rounded-full border border-white/20 bg-white/5 px-3 py-1 text-[11px]",children:[(0,a.jsx)(o.Z,{size:13,className:"text-amber-300"}),"قرعه‌کشی یکپارچه"]}),(0,a.jsxs)("h1",{className:"text-2xl font-black leading-tight text-white sm:text-3xl lg:text-4xl",children:["قرعه‌کشی حرفه‌ای",(0,a.jsx)("span",{className:"block text-cyan-300",children:"با مسیر شانس متصل"})]}),(0,a.jsx)("p",{className:"text-xs leading-6 text-white/75 sm:text-sm",children:"خرید بلیط، دریافت شانس و اتصال مستقیم به ماشین اسلاید و اسلاید آرنا در یک مسیر."}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2.5",children:[(0,a.jsxs)(r.default,{href:"/slide-game",className:"inline-flex items-center gap-2 rounded-lg bg-cyan-400 px-3.5 py-2 text-xs font-black text-black transition-colors hover:bg-cyan-300 sm:text-sm",children:["ماشین اسلاید",(0,a.jsx)(d.Z,{size:14})]}),(0,a.jsxs)(r.default,{href:"/slide-arena",className:"inline-flex items-center gap-2 rounded-lg border border-white/20 bg-white/10 px-3.5 py-2 text-xs font-bold text-white transition-colors hover:bg-white/15 sm:text-sm",children:["اسلاید آرنا",(0,a.jsx)(d.Z,{size:14})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2.5 lg:col-span-4",children:[(0,a.jsxs)("div",{className:"rounded-xl border border-white/10 bg-black/25 p-3",children:[(0,a.jsx)("p",{className:"mb-1 text-[11px] text-white/60",children:"شانس"}),(0,a.jsx)("p",{className:"text-lg font-black text-cyan-300 sm:text-xl",children:(null!==(t=null==f?void 0:f.chances)&&void 0!==t?t:0).toLocaleString("fa-IR")})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-white/10 bg-black/25 p-3",children:[(0,a.jsx)("p",{className:"mb-1 text-[11px] text-white/60",children:"تومان"}),(0,a.jsx)("p",{className:"text-lg font-black text-amber-300 sm:text-xl",children:(null!==(s=null==f?void 0:f.walletBalance)&&void 0!==s?s:0).toLocaleString("fa-IR")})]}),(0,a.jsxs)("div",{className:"col-span-2 rounded-xl border border-white/10 bg-black/25 p-3",children:[(0,a.jsx)("p",{className:"mb-1 text-[11px] text-white/60",children:"قرعه‌کشی فعال"}),(0,a.jsxs)("p",{className:"text-base font-black text-white sm:text-lg",children:[g.filter(e=>"open"===e.status).length.toLocaleString("fa-IR")," مورد"]})]})]})]})]}),(0,a.jsx)("section",{className:"rounded-2xl border border-white/10 bg-white/[0.03] p-4 backdrop-blur-xl sm:p-5",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[(0,a.jsxs)("div",{className:"space-y-4 lg:col-span-5",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-2 block text-xs text-white/70 sm:text-sm",children:"انتخاب قرعه‌کشی"}),(0,a.jsx)("select",{value:j,onChange:e=>v(e.target.value),className:"w-full rounded-lg border border-white/20 bg-black/20 px-3 py-2.5 text-sm",children:g.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.title," (",e.status,")"]},e.id))})]}),Z?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"rounded-xl border border-white/10 bg-black/25 p-3.5",children:[(0,a.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-xs text-white/65",children:"وضعیت"}),(0,a.jsx)("span",{className:"rounded-full border border-white/20 bg-white/5 px-2 py-1 text-[11px]",children:z})]}),(0,a.jsx)("h2",{className:"text-base font-black sm:text-lg",children:Z.title}),(0,a.jsxs)("p",{className:"mt-2 text-xs text-white/70 sm:text-sm",children:["قیمت تقریبی هر بلیط: ",(0,a.jsx)("span",{className:"font-black text-amber-300",children:I.toLocaleString("fa-IR")})," تومان"]})]}),(0,a.jsxs)("div",{className:"space-y-2 rounded-xl border border-white/10 bg-black/20 p-3.5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs sm:text-sm",children:[(0,a.jsx)("span",{className:"text-white/70",children:"پیشرفت فروش"}),(0,a.jsxs)("span",{className:"font-bold",children:[L.toLocaleString("fa-IR"),"٪"]})]}),(0,a.jsx)("div",{className:"h-2 overflow-hidden rounded-full bg-white/10",children:(0,a.jsx)("div",{className:"h-full bg-gradient-to-r from-cyan-400 to-emerald-400",style:{width:"".concat(L,"%")}})}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-[11px] text-white/65 sm:text-xs",children:[(0,a.jsxs)("span",{children:["فروخته‌شده: ",Z.ticketsSold.toLocaleString("fa-IR")]}),(0,a.jsxs)("span",{children:["باقی‌مانده: ",(Z.maxTickets-Z.ticketsSold).toLocaleString("fa-IR")]})]})]})]}):null]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-3.5 lg:col-span-7 lg:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-3 rounded-xl border border-white/10 bg-black/20 p-3.5 sm:p-4",children:[(0,a.jsxs)("h3",{className:"flex items-center gap-2 text-base font-black",children:[(0,a.jsx)(x.Z,{size:16,className:"text-cyan-300"}),"خرید تکی"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-2 block text-xs text-white/70 sm:text-sm",children:"تعداد بلیط"}),(0,a.jsx)("select",{value:w,onChange:e=>N(Number(e.target.value)),className:"w-full rounded-lg border border-white/20 bg-black/20 px-3 py-2.5 text-sm",children:Array.from({length:20},(e,t)=>t+1).map(e=>(0,a.jsx)("option",{value:e,children:e.toLocaleString("fa-IR")},e))})]}),(0,a.jsx)("button",{onClick:P,className:"w-full rounded-lg bg-cyan-400 py-2.5 text-sm font-black text-black transition-colors hover:bg-cyan-300 disabled:opacity-60",disabled:!Z||"open"!==Z.status,children:"خرید تکی"}),b?null:(0,a.jsx)("p",{className:"text-[11px] text-amber-300",children:"برای خرید باید وارد حساب شوید."})]}),(0,a.jsxs)("div",{className:"space-y-3 rounded-xl border border-white/10 bg-black/20 p-3.5 sm:p-4",children:[(0,a.jsxs)("h3",{className:"flex items-center gap-2 text-base font-black",children:[(0,a.jsx)(h.Z,{size:16,className:"text-amber-300"}),"پکیج‌ها"]}),null==Z?void 0:null===(e=Z.comboPackages)||void 0===e?void 0:e.map(e=>(0,a.jsxs)("div",{className:"rounded-lg border border-white/10 bg-white/[0.03] p-3",children:[(0,a.jsx)("p",{className:"text-sm font-bold",children:"silver"===e.code?"پکیج نقره‌ای":"پکیج طلایی"}),(0,a.jsxs)("p",{className:"mt-1 text-xs text-white/70 sm:text-sm",children:[e.paidTickets.toLocaleString("fa-IR")," خرید + ",e.bonusTickets.toLocaleString("fa-IR")," هدیه + ",e.bonusChances.toLocaleString("fa-IR")," شانس"]}),e.vipDays>0?(0,a.jsxs)("p",{className:"mt-1 text-[11px] text-amber-300",children:["+ ",e.vipDays.toLocaleString("fa-IR")," روز VIP"]}):null,(0,a.jsx)("button",{className:"mt-2 rounded-lg border border-white/20 px-3 py-2 text-xs font-bold transition-colors hover:bg-white/10 disabled:opacity-60 sm:text-sm",onClick:()=>C(e.code),disabled:!Z||"open"!==Z.status,children:"خرید پکیج"})]},e.code)),k?(0,a.jsxs)("div",{className:"rounded-lg border border-emerald-500/30 bg-emerald-500/10 p-3 text-xs sm:text-sm",children:[(0,a.jsxs)("p",{children:["جمع پرداخت: ",(0,a.jsx)("b",{children:k.totalPaid.toLocaleString("fa-IR")})," تومان"]}),(0,a.jsxs)("p",{children:["کش‌بک: ",(0,a.jsx)("b",{children:k.cashback.toLocaleString("fa-IR")})," تومان"]}),k.pity?(0,a.jsxs)("p",{children:["حافظه شانس: x",k.pity.pityMultiplier.toFixed(2)]}):null]}):null]})]})]})}),(0,a.jsx)("section",{className:"rounded-2xl border border-white/10 bg-gradient-to-r from-cyan-500/10 to-amber-500/10 p-4 sm:p-5",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 items-center gap-3 lg:grid-cols-3",children:[(0,a.jsxs)("div",{className:"lg:col-span-2",children:[(0,a.jsxs)("h3",{className:"flex items-center gap-2 text-base font-black sm:text-lg",children:[(0,a.jsx)(u.Z,{size:18,className:"text-cyan-300"}),"اتصال به بازی‌های شانس"]}),(0,a.jsx)("p",{className:"mt-2 text-xs leading-6 text-white/75 sm:text-sm",children:"شانس دریافتی از پکیج‌ها را مستقیم در ماشین اسلاید و اسلاید آرنا استفاده کن."})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row lg:flex-col",children:[(0,a.jsxs)(r.default,{href:"/slide-game",className:"inline-flex items-center justify-center gap-2 rounded-lg bg-cyan-400 px-3.5 py-2 text-xs font-black text-black transition-colors hover:bg-cyan-300 sm:text-sm",children:[(0,a.jsx)(m.Z,{size:14}),"ورود به ماشین اسلاید"]}),(0,a.jsxs)(r.default,{href:"/slide-arena",className:"inline-flex items-center justify-center gap-2 rounded-lg border border-white/20 bg-white/5 px-3.5 py-2 text-xs font-bold text-white transition-colors hover:bg-white/10 sm:text-sm",children:[(0,a.jsx)(u.Z,{size:14}),"ورود به اسلاید آرنا"]})]})]})})]})})}},7766:function(e,t,s){"use strict";s.d(t,{H:function(){return o},a:function(){return d}});var a=s(7437),r=s(2265),l=s(1837),i=s(5572);let n=(0,r.createContext)(null);async function c(){return(0,l.Nv)("/me",{method:"GET"},{auth:!0})}function o(e){let{children:t}=e,[s,o]=(0,r.useState)(null),[d,x]=(0,r.useState)(!0),h=(0,r.useCallback)(async()=>{try{let e=await c();o(e)}catch(e){o(null)}},[]);(0,r.useEffect)(()=>{let e=!0;return(async()=>{try{let t=await c();e&&o(t)}catch(t){e&&o(null)}finally{e&&x(!1)}})(),()=>{e=!1}},[]);let u=(0,r.useCallback)(async e=>{let{email:t,password:s}=e,a=await (0,l.Nv)("/auth/login",{method:"POST",body:JSON.stringify({email:t,password:s})},{auth:!1});return(0,l.vD)({accessToken:a.accessToken,refreshToken:a.refreshToken}),(0,i.DM)(a.user),o(a.user),a.user},[]),m=(0,r.useCallback)(async e=>{let{email:t,password:s,referralCode:a}=e;await (0,l.Nv)("/auth/register",{method:"POST",body:JSON.stringify({email:t,password:s,referralCode:a})},{auth:!1})},[]),b=(0,r.useCallback)(async()=>{try{await (0,l.Nv)("/auth/logout",{method:"POST",body:JSON.stringify({})})}catch(e){}finally{(0,l.Je)(),(0,i.DM)(null),o(null)}},[]),f=(0,r.useMemo)(()=>({user:s,isLoading:d,isAuthenticated:!!s,login:u,register:m,logout:b,refreshMe:h}),[s,d,u,m,b,h]);return(0,a.jsx)(n.Provider,{value:f,children:t})}function d(){let e=(0,r.useContext)(n);if(!e)throw Error("useAuth must be used within AuthProvider");return e}}},function(e){e.O(0,[5186,2972,1837,2971,2117,1744],function(){return e(e.s=3955)}),_N_E=e.O()}]);