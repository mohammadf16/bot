(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7702],{1862:function(e,t,a){Promise.resolve().then(a.bind(a,6067))},8755:function(e,t,a){"use strict";a.d(t,{Z:function(){return u}});var l=a(2265);let r=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()},s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),c=e=>{let t=n(e);return t.charAt(0).toUpperCase()+t.slice(1)};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1},d=(0,l.forwardRef)((e,t)=>{let{color:a="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:c,className:d="",children:u,iconNode:h,...x}=e;return(0,l.createElement)("svg",{ref:t,...i,width:s,height:s,stroke:a,strokeWidth:c?24*Number(n)/Number(s):n,className:r("lucide",d),...!u&&!o(x)&&{"aria-hidden":"true"},...x},[...h.map(e=>{let[t,a]=e;return(0,l.createElement)(t,a)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let a=(0,l.forwardRef)((a,n)=>{let{className:i,...o}=a;return(0,l.createElement)(d,{ref:n,iconNode:t,className:r("lucide-".concat(s(c(e))),"lucide-".concat(e),i),...o})});return a.displayName=c(e),a}},4401:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});let l=(0,a(8755).Z)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},4766:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});let l=(0,a(8755).Z)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]])},5080:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});let l=(0,a(8755).Z)("ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]])},9474:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});let l=(0,a(8755).Z)("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]])},5805:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});let l=(0,a(8755).Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},1804:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});let l=(0,a(8755).Z)("wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]])},1239:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});let l=(0,a(8755).Z)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},7648:function(e,t,a){"use strict";a.d(t,{default:function(){return r.a}});var l=a(2972),r=a.n(l)},6067:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return v}});var l=a(7437),r=a(2265),s=a(4072),n=a(5080),c=a(1804),i=a(1239),o=a(5805);let d=(0,a(8755).Z)("receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);var u=a(4766),h=a(4401),x=a(9474),f=a(7648),m=a(5186),p=a(1837),b=a(7766);function v(){var e,t,a;let{user:v,refreshMe:y}=(0,b.a)(),[g,N]=(0,r.useState)([]),[j,k]=(0,r.useState)({totalReferrals:0}),[w,A]=(0,r.useState)([]),[Z,M]=(0,r.useState)([]);(0,r.useEffect)(()=>{(async()=>{try{await y();let[e,t,a,l]=await Promise.all([(0,p.Nv)("/me/tickets"),(0,p.Nv)("/me/referral"),(0,p.Nv)("/me/history"),(0,p.Nv)("/me/activity")]);N(e.items),k(t),A(a.items),M(l.items)}catch(e){m.ZP.error(e instanceof Error?e.message:"خطا در دریافت داشبورد")}})()},[y]);let S=(0,r.useMemo)(()=>w.filter(e=>"cashback"===e.type).reduce((e,t)=>e+t.amount,0),[w]),C=[{label:"بلیط های فعال",value:g.length.toLocaleString("fa-IR"),icon:n.Z,color:"text-blue-500"},{label:"موجودی کیف پول",value:(null!==(e=null==v?void 0:v.walletBalance)&&void 0!==e?e:0).toLocaleString("fa-IR"),unit:"تومان",icon:c.Z,color:"text-accent-gold"},{label:"شانس قرعه",value:(null!==(t=null==v?void 0:v.chances)&&void 0!==t?t:0).toLocaleString("fa-IR"),icon:i.Z,color:"text-purple-500"},{label:"کش بک",value:S.toLocaleString("fa-IR"),unit:"تومان",icon:c.Z,color:"text-cyan-400"},{label:"زیرمجموعه",value:j.totalReferrals.toLocaleString("fa-IR"),icon:o.Z,color:"text-emerald-500"}];return(0,l.jsxs)("div",{className:"space-y-10",dir:"rtl",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("h1",{className:"text-3xl font-black tracking-tight mb-2",children:["سلام، ",(0,l.jsx)("span",{className:"text-accent-gold",children:null!==(a=null==v?void 0:v.email)&&void 0!==a?a:"کاربر"})]}),(0,l.jsx)("p",{className:"text-white/40 text-sm font-bold",children:"خلاصه حساب، اعلان ها و گردش آخر فعالیت های شما"})]}),(0,l.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6",children:C.map((e,t)=>{let a=e.icon;return(0,l.jsxs)(s.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.08*t},className:"bg-[#0A0A0A] border border-white/5 p-6 rounded-[2rem]",children:[(0,l.jsx)("div",{className:"w-12 h-12 bg-white/5 rounded-2xl flex items-center justify-center mb-4",children:(0,l.jsx)(a,{className:"w-6 h-6 ".concat(e.color)})}),(0,l.jsx)("p",{className:"text-white/40 text-xs mb-1",children:e.label}),(0,l.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,l.jsx)("span",{className:"text-2xl font-black",children:e.value}),e.unit&&(0,l.jsx)("span",{className:"text-[10px] text-white/20",children:e.unit})]})]},t)})}),(0,l.jsxs)("section",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,l.jsxs)(f.default,{href:"/wallet",className:"bg-[#0A0A0A] border border-white/5 p-5 rounded-2xl hover:border-accent-gold/30 transition-colors",children:[(0,l.jsx)(c.Z,{className:"text-accent-gold mb-3"}),(0,l.jsx)("p",{className:"font-black",children:"کیف پول"})]}),(0,l.jsxs)(f.default,{href:"/dashboard/tickets",className:"bg-[#0A0A0A] border border-white/5 p-5 rounded-2xl hover:border-accent-gold/30 transition-colors",children:[(0,l.jsx)(d,{className:"text-accent-gold mb-3"}),(0,l.jsx)("p",{className:"font-black",children:"تاریخچه بلیط"})]}),(0,l.jsxs)(f.default,{href:"/dashboard/referral",className:"bg-[#0A0A0A] border border-white/5 p-5 rounded-2xl hover:border-accent-gold/30 transition-colors",children:[(0,l.jsx)(o.Z,{className:"text-accent-gold mb-3"}),(0,l.jsx)("p",{className:"font-black",children:"زیرمجموعه گیری"})]}),(0,l.jsxs)(f.default,{href:"/dashboard/notifications",className:"bg-[#0A0A0A] border border-white/5 p-5 rounded-2xl hover:border-accent-gold/30 transition-colors",children:[(0,l.jsx)(u.Z,{className:"text-accent-gold mb-3"}),(0,l.jsx)("p",{className:"font-black",children:"اعلان ها"})]})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("h2",{className:"text-xl font-black flex items-center gap-2",children:[(0,l.jsx)(h.Z,{className:"text-accent-gold"})," گردش آخر حساب"]}),Z.slice(0,8).map(e=>(0,l.jsxs)("div",{className:"bg-[#0A0A0A] border border-white/5 p-4 rounded-2xl flex items-center justify-between gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-bold",children:e.title}),(0,l.jsx)("p",{className:"text-xs text-white/40",children:new Date(e.createdAt).toLocaleString("fa-IR")}),e.body?(0,l.jsx)("p",{className:"text-xs text-white/60 mt-1",children:e.body}):null]}),(0,l.jsxs)("div",{className:"text-left",children:[(0,l.jsx)("p",{className:"text-xs text-white/40",children:e.source}),"number"==typeof e.amount?(0,l.jsxs)("p",{className:"font-bold",children:[e.amount.toLocaleString("fa-IR")," تومان"]}):null]})]},e.id)),Z.length?null:(0,l.jsx)("p",{className:"text-sm text-white/50",children:"فعلا فعالیتی ثبت نشده است."})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("h2",{className:"text-xl font-black flex items-center gap-2",children:[(0,l.jsx)(x.Z,{className:"text-accent-gold"})," بلیط های من"]}),g.slice(0,5).map(e=>(0,l.jsxs)("div",{className:"bg-[#0A0A0A] border border-white/5 p-5 rounded-2xl flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-bold",children:e.raffleTitle}),(0,l.jsxs)("p",{className:"text-xs text-white/40",children:["کد بلیط: ",e.id," - شماره: ",e.index.toLocaleString("fa-IR")]})]}),(0,l.jsxs)("div",{className:"text-left",children:[(0,l.jsxs)("p",{className:"font-bold",children:[e.pricePaid.toLocaleString("fa-IR")," تومان"]}),(0,l.jsx)("p",{className:"text-xs text-white/40",children:e.raffleStatus})]})]},e.id))]})]})}},7766:function(e,t,a){"use strict";a.d(t,{H:function(){return o},a:function(){return d}});var l=a(7437),r=a(2265),s=a(1837),n=a(5572);let c=(0,r.createContext)(null);async function i(){return(0,s.Nv)("/me",{method:"GET"},{auth:!0})}function o(e){let{children:t}=e,[a,o]=(0,r.useState)(null),[d,u]=(0,r.useState)(!0),h=(0,r.useCallback)(async()=>{try{let e=await i();o(e)}catch(e){o(null)}},[]);(0,r.useEffect)(()=>{let e=!0;return(async()=>{try{let t=await i();e&&o(t)}catch(t){e&&o(null)}finally{e&&u(!1)}})(),()=>{e=!1}},[]);let x=(0,r.useCallback)(async e=>{let{email:t,password:a}=e,l=await (0,s.Nv)("/auth/login",{method:"POST",body:JSON.stringify({email:t,password:a})},{auth:!1});return(0,s.vD)({accessToken:l.accessToken,refreshToken:l.refreshToken}),(0,n.DM)(l.user),o(l.user),l.user},[]),f=(0,r.useCallback)(async e=>{let{email:t,password:a,referralCode:l}=e;await (0,s.Nv)("/auth/register",{method:"POST",body:JSON.stringify({email:t,password:a,referralCode:l})},{auth:!1})},[]),m=(0,r.useCallback)(async()=>{try{await (0,s.Nv)("/auth/logout",{method:"POST",body:JSON.stringify({})})}catch(e){}finally{(0,s.Je)(),(0,n.DM)(null),o(null)}},[]),p=(0,r.useMemo)(()=>({user:a,isLoading:d,isAuthenticated:!!a,login:x,register:f,logout:m,refreshMe:h}),[a,d,x,f,m,h]);return(0,l.jsx)(c.Provider,{value:p,children:t})}function d(){let e=(0,r.useContext)(c);if(!e)throw Error("useAuth must be used within AuthProvider");return e}}},function(e){e.O(0,[5186,4072,2972,1837,2971,2117,1744],function(){return e(e.s=1862)}),_N_E=e.O()}]);